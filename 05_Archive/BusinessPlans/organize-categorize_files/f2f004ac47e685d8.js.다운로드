(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,533568,538036,889963,431533,416872,512122,680126,689280,e=>{"use strict";e.s(["default",()=>sx],533568);var t=e.i(628925),a=e.i(76756),s=e.i(700585),i=e.i(315366),r=e.i(850821),n=e.i(246429),o=e.i(637797),l=e.i(72290),d=e.i(497985);e.i(685846);var c=e.i(376098),u=e.i(90476),m=e.i(12465),p=e.i(510965);let g=(0,p.default)("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);var h=e.i(763578);e.s(["useEditImagePresets",()=>ee],889963);let x=(0,p.default)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["default",()=>v],538036);let v=(0,p.default)("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);var f=e.i(810552);let y=(0,p.default)("Castle",[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]]);var b=e.i(484143);let j=(0,p.default)("CircuitBoard",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M11 9h4a2 2 0 0 0 2-2V3",key:"1ve2rv"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"M7 21v-4a2 2 0 0 1 2-2h4",key:"1fwkro"}],["circle",{cx:"15",cy:"15",r:"2",key:"3i40o0"}]]);var k=e.i(286591),w=e.i(93819),S=e.i(340656),S=S,I=e.i(19044);let C=(0,p.default)("Focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),M=(0,p.default)("Gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]);var N=e.i(513488),T=e.i(379841);let E=(0,p.default)("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]),P=(0,p.default)("Joystick",[["path",{d:"M21 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2Z",key:"jg2n2t"}],["path",{d:"M6 15v-2",key:"gd6mvg"}],["path",{d:"M12 15V9",key:"8c7uyn"}],["circle",{cx:"12",cy:"6",r:"3",key:"1gm2ql"}]]),_=(0,p.default)("MountainSnow",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}],["path",{d:"M4.14 15.08c2.62-1.57 5.24-1.43 7.86.42 2.74 1.94 5.49 2 8.23.19",key:"1pvmmp"}]]),D=(0,p.default)("Orbit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]]);var A=e.i(122390),z=e.i(979094);let L=(0,p.default)("Radiation",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7.5 4.2c-.3-.5-.9-.7-1.3-.4C3.9 5.5 2.3 8.1 2 11c-.1.5.4 1 1 1h5c0-1.5.8-2.8 2-3.4-1.1-1.9-2-3.5-2.5-4.4z",key:"wy49g3"}],["path",{d:"M21 12c.6 0 1-.4 1-1-.3-2.9-1.8-5.5-4.1-7.1-.4-.3-1.1-.2-1.3.3-.6.9-1.5 2.5-2.6 4.3 1.2.7 2 2 2 3.5h5z",key:"vklnvr"}],["path",{d:"M7.5 19.8c-.3.5-.1 1.1.4 1.3 2.6 1.2 5.6 1.2 8.2 0 .5-.2.7-.8.4-1.3-.5-.9-1.4-2.5-2.5-4.3-1.2.7-2.8.7-4 0-1.1 1.8-2 3.4-2.5 4.3z",key:"wkdf1o"}]]);var R=e.i(174389);let O=(0,p.default)("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);var U=e.i(642838);let B=(0,p.default)("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);var F=e.i(88378);let H=(0,p.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),q=(0,p.default)("SprayCan",[["path",{d:"M3 3h.01",key:"159qn6"}],["path",{d:"M7 5h.01",key:"1hq22a"}],["path",{d:"M11 7h.01",key:"1osv80"}],["path",{d:"M3 7h.01",key:"1xzrh3"}],["path",{d:"M7 9h.01",key:"19b3jx"}],["path",{d:"M3 11h.01",key:"1eifu7"}],["rect",{width:"4",height:"4",x:"15",y:"5",key:"mri9e4"}],["path",{d:"m19 9 2 2v10c0 .6-.4 1-1 1h-6c-.6 0-1-.4-1-1V11l2-2",key:"aib6hk"}],["path",{d:"m13 14 8-2",key:"1d7bmk"}],["path",{d:"m13 19 8-2",key:"1y2vml"}]]);var G=e.i(410594);let K=(0,p.default)("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]),V=(0,p.default)("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]),W=(0,p.default)("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]),Y=(0,p.default)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Q=(0,p.default)("VenetianMask",[["path",{d:"M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V7h-5a8 8 0 0 0-5 2 8 8 0 0 0-5-2H2Z",key:"1g6z3j"}],["path",{d:"M6 11c1.5 0 3 .5 3 2-2 0-3 0-3-2Z",key:"c2lwnf"}],["path",{d:"M18 11c-1.5 0-3 .5-3 2 2 0 3 0 3-2Z",key:"njd9zo"}]]);var X=e.i(246727),J=e.i(140578);e.i(968648);var Z=e.i(446583),$=e.i(50636);function ee(){let e=(0,$.useFeatureFlags)();return(0,J.useMemo)(()=>{var t,a;let s=Array.isArray(null==(a=e.EDIT_IMAGE_PRESETS)||null==(t=a.value)?void 0:t.presets)?e.EDIT_IMAGE_PRESETS.value.presets:[];return{editImagePresets:et.map(e=>({...e,label:e.label,presets:e.presets.map(e=>{var t,a;return{...e,prompt:null!=(a=null==(t=s.find(t=>t.presetId===e.presetId))?void 0:t.prompt)?a:""}})})).filter(e=>e.presets.some(e=>e.prompt)).map(e=>({...e,presets:e.presets.filter(e=>e.prompt)}))}},[e])}let et=[{category:"creative",icon:A.Paintbrush,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.categories.creative",defaults:"Creative"}),presets:[{presetId:"water-color",icon:w.Droplet,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.water-color",defaults:"Watercolor"}),previewUrl:"/image-editing-preset-previews/water-color.jpg"},{presetId:"15th-century",icon:y,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.15th-century",defaults:"15th Century"}),previewUrl:"/image-editing-preset-previews/15th-century.jpg"},{presetId:"graffiti",icon:q,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.graffiti",defaults:"Graffiti"}),previewUrl:"/image-editing-preset-previews/graffiti.jpg"},{presetId:"renaissance-painting",icon:z.Palette,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.renaissance-painting",defaults:"Renaissance Painting"}),previewUrl:"/image-editing-preset-previews/renaissance-painting.jpg"},{presetId:"symbolist-painting",icon:S.default,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.symbolist-painting",defaults:"Symbolist Painting"}),previewUrl:"/image-editing-preset-previews/symbolist-painting.jpg"},{presetId:"expressionist-painting",icon:v,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.expressionist-painting",defaults:"Expressionist Painting"}),previewUrl:"/image-editing-preset-previews/expressionist-painting.jpg"},{presetId:"cubist-painting",icon:G.Square,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.cubist-painting",defaults:"Cubist Painting"}),previewUrl:"/image-editing-preset-previews/cubist-painting.jpg"},{presetId:"ukiyo-e-painting",icon:b.Cherry,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.ukiyo-e-painting",defaults:"Ukiyo-e Painting"}),previewUrl:"/image-editing-preset-previews/ukiyo-e-painting.jpg"},{presetId:"bright-anime",icon:F.Smile,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.bright-anime",defaults:"Bright Anime"}),previewUrl:"/image-editing-preset-previews/bright-anime.jpg"},{presetId:"dark-anime",icon:B,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.dark-anime",defaults:"Dark Anime"}),previewUrl:"/image-editing-preset-previews/dark-anime.jpg"},{presetId:"cyberpunk",icon:j,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.cyberpunk",defaults:"Cyberpunk"}),previewUrl:"/image-editing-preset-previews/cyberpunk.jpg"},{presetId:"retro-game",icon:M,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.retro-game",defaults:"Retro Game"}),previewUrl:"/image-editing-preset-previews/retro-game.jpg"}]},{category:"background",icon:_,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.categories.background",defaults:"Background"}),presets:[{presetId:"paris",icon:f.Building2,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.paris",defaults:"Paris"}),previewUrl:"/image-editing-preset-previews/paris.jpg"},{presetId:"london",icon:f.Building2,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.london",defaults:"London"}),previewUrl:"/image-editing-preset-previews/london.jpg"},{presetId:"tokyo",icon:f.Building2,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.tokyo",defaults:"Tokyo"}),previewUrl:"/image-editing-preset-previews/tokyo.jpg"},{presetId:"mars",icon:D,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.mars",defaults:"Mars"}),previewUrl:"/image-editing-preset-previews/mars.jpg"},{presetId:"tropical-paradise",icon:V,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.tropical-paradise",defaults:"Tropical Paradise"}),previewUrl:"/image-editing-preset-previews/tropical-paradise.jpg"},{presetId:"cosmic-void",icon:H,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.cosmic-void",defaults:"Cosmic Void"}),previewUrl:"/image-editing-preset-previews/cosmic-void.jpg"},{presetId:"urban-rooftop",icon:f.Building2,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.urban-rooftop",defaults:"Urban Rooftop"}),previewUrl:"/image-editing-preset-previews/urban-rooftop.jpg"},{presetId:"enchanted-cave",icon:N.Gem,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.enchanted-cave",defaults:"Enchanted Cave"}),previewUrl:"/image-editing-preset-previews/enchanted-cave.jpg"},{presetId:"misty-forest",icon:W,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.misty-forest",defaults:"Misty Forest"}),previewUrl:"/image-editing-preset-previews/misty-forest.jpg"},{presetId:"retro-arcade",icon:P,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.retro-arcade",defaults:"Retro Arcade"}),previewUrl:"/image-editing-preset-previews/retro-arcade.jpg"},{presetId:"space-station",icon:R.Rocket,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.space-station",defaults:"Space Station"}),previewUrl:"/image-editing-preset-previews/space-station.jpg"},{presetId:"desert-oasis",icon:V,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.desert-oasis",defaults:"Desert Oasis"}),previewUrl:"/image-editing-preset-previews/desert-oasis.jpg"},{presetId:"volcano-lair",icon:I.Flame,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.volcano-lair",defaults:"Volcano Lair"}),previewUrl:"/image-editing-preset-previews/volcano-lair.jpg"},{presetId:"post-apocalypse",icon:L,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.post-apocalypse",defaults:"Post-Apocalypse"}),previewUrl:"/image-editing-preset-previews/post-apocalypse.jpg"}]},{category:"subject",icon:C,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.categories.subject",defaults:"Subject"}),presets:[{presetId:"stylish-hat",icon:E,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.stylish-hat",defaults:"Stylish Hat"}),previewUrl:"/image-editing-preset-previews/stylish-hat.jpg"},{presetId:"mustache",icon:Q,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.mustache",defaults:"Mustache"}),previewUrl:"/image-editing-preset-previews/mustache.jpg"},{presetId:"superhero-costume",icon:X.Zap,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.superhero-costume",defaults:"Superhero Costume"}),previewUrl:"/image-editing-preset-previews/superhero-costume.jpg"},{presetId:"golden-glow",icon:K,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.golden-glow",defaults:"Golden Glow"}),previewUrl:"/image-editing-preset-previews/golden-glow.jpg"},{presetId:"mecha-warrior",icon:x,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.mecha-warrior",defaults:"Mecha Warrior"}),previewUrl:"/image-editing-preset-previews/mecha-warrior.jpg"},{presetId:"sunglasses-jacket",icon:T.Glasses,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.sunglasses-jacket",defaults:"Sunglasses & Jacket"}),previewUrl:"/image-editing-preset-previews/sunglasses-jacket.jpg"},{presetId:"medieval-armor",icon:U.Shield,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.medieval-armor",defaults:"Medieval Armor"}),previewUrl:"/image-editing-preset-previews/medieval-armor.jpg"},{presetId:"time-traveler",icon:k.Clock,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.time-traveler",defaults:"Time Traveler"}),previewUrl:"/image-editing-preset-previews/time-traveler.jpg"},{presetId:"hologram-effect",icon:O,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.hologram-effect",defaults:"Hologram Effect"}),previewUrl:"/image-editing-preset-previews/hologram-effect.jpg"},{presetId:"dragon-rider",icon:I.Flame,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.dragon-rider",defaults:"Dragon Rider"}),previewUrl:"/image-editing-preset-previews/dragon-rider.jpg"},{presetId:"remove-people",icon:Y,label:(0,t.jsx)(Z.Trans,{ns:"base",i18nKey:"edit-image-presets.presets.remove-people",defaults:"Remove People"}),previewUrl:"/image-editing-preset-previews/remove-people.jpg"}]}];var ea=e.i(122088),es=e.i(969736),ei=e.i(486492),er=e.i(179314),en=e.i(623434),eo=e.i(873329),el=e.i(723008);let ed=e=>{let{hasImage:a,prompt:s,onParentPeek:i,focusedImageUrl:r,parentImageUrl:o,isStreaming:l,onRegenerate:p,onClose:x}=e,{t:v}=(0,eo.useTranslation)("base"),[f,y]=(0,J.useState)(!1),[b,j]=(0,J.useState)(void 0),[k,w]=(0,J.useState)(!1),S=(0,ea.useMobileUa)(),I=(0,n.useChatPageStore)(e=>e.conversationId),C=(0,n.useChatPageStore)(e=>e.lastMessageId),{editImagePresets:M}=ee(),N=(0,J.useMemo)(()=>{if(!b)return;let e=M.flatMap(e=>e.presets).find(e=>e.prompt===b);return e?(0,t.jsxs)(t.Fragment,{children:[e.icon&&J.default.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),(0,t.jsx)("h1",{className:"text-lg font-semibold truncate",children:e.label})]}):(0,t.jsx)("h1",{className:"text-lg font-semibold truncate",children:b})},[b,M]),T=(0,J.useCallback)(()=>{!k&&r&&(w(!0),(0,es.downloadImage)(r,null==r?void 0:r.split("/").pop()).catch((0,ei.createLogError)("image-editor:handleDownload")).finally(()=>w(!1)))},[r,k]);return(0,J.useEffect)(()=>{s&&b!==s&&j(s)},[s,b]),(0,J.useEffect)(()=>{o&&!f&&y(!0)},[o,f]),(0,t.jsx)("header",{className:"flex justify-between w-full items-center min-h-10 gap-3  relative z-30 flex-shrink-0",children:(0,t.jsxs)(er.AnimatePresence,{mode:"popLayout",children:[b&&(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"flex items-center gap-2 w-full overflow-hidden min-w-0",children:N},b),(0,t.jsxs)("div",{className:"flex gap-2 ms-auto shrink-0",children:[(0,t.jsxs)(t.Fragment,{children:[f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(h.ButtonWithTooltip,{size:"iconMd",variant:"ghost",rounded:!0,"aria-label":v("Compare","Compare"),tooltipContent:v("Compare","Compare"),tooltipContentProps:{side:"bottom"},onMouseDown:()=>i(!0),onMouseUp:()=>i(!1),onMouseLeave:()=>i(!1),onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),i(!1)},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},onContextMenuCapture:e=>{e.preventDefault(),e.stopPropagation()},asChild:!0,disabled:l||!o,children:(0,t.jsx)(en.motion.button,{whileTap:!l&&o?{scale:.9}:void 0,children:(0,t.jsx)(g,{className:"size-5"})})})},"compare"),(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(h.ButtonWithTooltip,{size:"iconMd",variant:"ghost",rounded:!0,"aria-label":v("Regenerate","Regenerate"),tooltipContent:v("Regenerate","Regenerate"),tooltipContentProps:{side:"bottom"},asChild:!0,disabled:l||!o,onClick:p,children:(0,t.jsx)(en.motion.button,{whileTap:!l&&o?{scale:.9}:void 0,children:(0,t.jsx)(u.RefreshCwIcon,{className:"size-5"})})})},"regenerate")]}),a&&(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(h.ButtonWithTooltip,{variant:"ghost",size:"iconMd",rounded:!0,"aria-label":v("Download Image","Download Image"),tooltipContent:v("Download Image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:l||!r||k,onClick:T,children:k?(0,t.jsx)(el.Spinner,{size:"xs"}):(0,t.jsx)(c.DownloadIcon,{className:"size-5"})})},"download"),I&&C&&(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,t.jsx)(d.ShareButton,{variant:"ghost",size:"iconMd",rounded:!0,conversationId:I,responseId:C,iconProps:{size:20}})},"share")]}),S?(0,t.jsx)(h.Button,{"aria-label":v("Close Image Editor","Close Image Editor"),variant:"filled",size:"iconMd",rounded:!0,onClick:x,children:(0,t.jsx)(m.XIcon,{size:20})}):(0,t.jsx)(h.ButtonWithTooltip,{"aria-label":v("Close Image Editor","Close Image Editor"),tooltipContent:v("Close Image Editor","Close Image Editor"),tooltipContentProps:{side:"bottom"},variant:"filled",size:"md",rounded:!0,onClick:x,children:v("Close","Close")})]})]})})};var ec=e.i(448888),eu=e.i(211959);let em=e=>{let{images:a,focusedOption:s,isStreaming:i,onSelect:r}=e;return(0,t.jsx)(en.motion.aside,{className:"lg:fixed top-0 inset-0 lg:top-0 lg:right-0 lg:left-auto flex lg:flex-col items-center justify-center lg:h-full gap-4 pb-3 lg:p-6 pointer-events-none z-30",variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,t.jsx)(er.AnimatePresence,{mode:"popLayout",children:a.map((e,a)=>(0,t.jsx)(en.motion.button,{className:(0,eu.cn)("size-16 sm:size-20 relative rounded-xl border bg-background p-1 pointer-events-auto",{"ring-primary ring-2":a===s}),onClick:()=>r(a),whileTap:a!==s?{scale:.95}:{},variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,t.jsx)("div",{className:"relative h-full w-full overflow-hidden rounded-lg",children:(0,t.jsx)("figure",{className:"absolute -translate-x-1/2 left-1/2 h-full aspect-[4/3]",children:(0,t.jsx)(ec.GrokImage,{isModerated:e.isModerated,status:i?"streaming":"finished",iconSize:24,intermediateResults:i?e.progressMap:[{progress:1,imageUrl:e.url}]})})})},e.id))})},"image-editor-option-nav")};var ep=e.i(310158),eg=e.i(383274),eh=e.i(592766),ex=e.i(511765),ev=e.i(920958),ef=e.i(259473),ey=e.i(688578),eb=e.i(536459),ej=e.i(159422),ek=e.i(470753),ew=e.i(633918),eS=e.i(221045),eI=e.i(715127);let eC=e=>{let{isEditingCurrentImage:a,setIsPeekingParent:s,isPeekingParent:i,focusedImage:r,parentImageUrl:n,generatedImageHeight:o,generatedImageWidth:l,isFinalImageLoaded:d,setIsFinalImageLoaded:c,isParentImageLoaded:u,setIsParentImageLoaded:m}=e,[p,g]=(0,J.useState)([]),[h,x]=(0,J.useState)(!1),[v,f]=(0,J.useState)(!1),[y,b]=(0,J.useState)(!0),j=(0,J.useMemo)(()=>!!(o&&l),[o,l]),k=(0,J.useMemo)(()=>o&&l?l/o:4/3,[o,l]);return(0,J.useEffect)(()=>{(a||!y)&&(null==r?void 0:r.progressMap)?g(r.progressMap):!a&&(null==r?void 0:r.url)?g(e=>[...e,{progress:1,imageUrl:r.url||""}]):g([])},[a,null==r?void 0:r.url,null==r?void 0:r.progressMap,y]),(0,J.useEffect)(()=>{if(!h)return void s(!1);let e=setTimeout(()=>{h&&!v&&s(!0)},100);return()=>clearTimeout(e)},[h,v,s]),(0,J.useEffect)(()=>{a&&y&&b(!1),a||!d||y||b(!0)},[a,d,y]),(0,t.jsx)("figure",{className:(0,eu.cn)("relative group/image w-full max-w-5xl 2xl:max-w-6xl overflow-hidden rounded-lg select-none",!a&&n&&(i?"cursor-grabbing":"cursor-grab")),onDragStart:e=>{if(i)return void e.preventDefault();f(!0)},onDragEnd:()=>{f(!1),x(!1)},onMouseDown:e=>{0===e.button&&x(!0)},onMouseUp:()=>x(!1),onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),x(!0)},onTouchEnd:e=>{e.preventDefault(),x(!1)},onMouseLeave:()=>{x(!1),f(!1)},children:(0,t.jsx)(er.AnimatePresence,{mode:"wait",children:a||!y?j?(0,t.jsx)(en.motion.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:1,filter:"blur(0px)",transition:{delay:1.5}},transition:{ease:"easeInOut"},className:"h-full mx-auto",style:{aspectRatio:k,maxHeight:o},children:(0,t.jsx)(ec.GrokImage,{status:"streaming",intermediateResults:p,isModerated:null==r?void 0:r.isModerated,aspectRatio:k})},"streaming-image"):(0,t.jsx)(eM,{}):(0,t.jsxs)("div",{className:"flex relative items-center justify-center w-full h-full",children:[(null==r?void 0:r.url)&&(0,t.jsxs)(t.Fragment,{children:[!d&&(0,t.jsx)(eM,{className:"absolute z-20 inset-0"}),(0,t.jsx)(en.motion.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},exit:"hidden",animate:n&&i||!d?"hidden":"visible",transition:{ease:"easeInOut"},src:r.url,alt:"active-image",className:"max-h-full aspect-auto rounded-lg",onLoad:()=>c(!0)},"finished-image")]}),(0,t.jsx)(er.AnimatePresence,{children:!a&&n&&i&&(0,t.jsxs)(en.motion.div,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},initial:"hidden",exit:"hidden",animate:"visible",transition:{ease:"easeInOut"},className:"absolute z-10 w-full h-full flex items-center overflow-hidden",children:[!u&&(0,t.jsx)(eM,{className:"absolute z-20 inset-0"}),(0,t.jsx)(en.motion.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},animate:u?"visible":"hidden",src:n,alt:"parent-image",className:"max-h-full aspect-auto mx-auto rounded-lg",onLoad:()=>m(!0)},"parent-image")]},"parent-image-container")})]})})})},eM=e=>{let{className:a}=e;return(0,t.jsx)(en.motion.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{ease:"easeInOut"},className:(0,eu.cn)("h-full w-full flex items-center justify-center animate-pulse-lg",a),children:(0,t.jsx)(eI.ImageIcon,{size:60,strokeWidth:1.3,className:"opacity-30 rotate-[-10deg]"})},"loader")};var eN=e.i(328788),eT=e.i(211550),eE=e.i(57779);e.s(["ImageLoader",()=>eP],431533);let eP=e=>{let{className:a}=e;return(0,t.jsx)(en.motion.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{ease:"easeInOut"},className:(0,eu.cn)("h-full w-full flex items-center justify-center animate-pulse-lg",a),children:(0,t.jsx)(eI.ImageIcon,{size:60,strokeWidth:1.3,className:"opacity-30 rotate-[-10deg]"})},"loader")};var e_=e.i(659065),eD=e.i(879085),eA=e.i(62912);let ez=e=>{let{hasImage:a,onSend:s,isStreaming:i}=e,{editImagePresets:r}=ee(),n=(0,eN.useMobileSize)(),{t:o}=(0,eo.useTranslation)("image-editor"),[l,d]=(0,J.useState)(null),[c,u]=(0,J.useState)(null),m=(0,J.useMemo)(()=>i||!a,[i,a]),p=(0,J.useCallback)(e=>{d(t=>t===e?null:e)},[d]),g=(0,J.useCallback)(e=>{if(!i)return d(null),s(e.prompt,e.presetId)},[i,s]),x=(0,J.useCallback)(()=>{if(!i)return d(null),s("Make video","make-video")},[i,s]),v=(0,J.useCallback)(e=>{let t=document.querySelector('[data-preset-id="'.concat(e,'"]'));if(!t)return{};let a=t.getBoundingClientRect();return a.right+12+200>window.innerWidth?{left:a.left-200-12,top:a.top+(a.height-150)/2}:{left:a.right+12,top:a.top+(a.height-150)/2}},[]);return(0,J.useEffect)(()=>{if(!l||n)return void u(null);let e=()=>{let e=document.body.querySelector("[data-highlighted][data-preset-id]"),t=(null==e?void 0:e.getAttribute("data-preset-id"))||null;t&&u(t)};e();let t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["data-highlighted"],subtree:!0}),()=>{t.disconnect()}},[l,n]),(0,t.jsxs)("div",{className:"@container flex w-full xs:justify-center justify-start items-center overflow-x-auto xs:overflow-visible gap-2 xs:gap-3 relative z-30 no-scrollbar",children:[(0,t.jsx)(en.motion.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut"},className:"bg-surface-base rounded-full",children:(0,t.jsxs)(h.Button,{variant:"filledSecondary",size:"md",className:"flex items-center justify-start py-3 border border-border-l1 rounded-3xl hover:text-fg-primary",onClick:x,children:[(0,t.jsx)(eA.Play,{fill:"currentColor",strokeWidth:0,className:"size-4"}),o("button.make-video","Make video")]},"make-video")},"make-video-animation"),r.map((e,a)=>(0,t.jsx)(en.motion.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut",delay:.06*(a+1)},className:"bg-surface-base rounded-full",children:n?(0,t.jsxs)(e_.Drawer,{open:e.category===l,onOpenChange:t=>{t?d(e.category):d(null)},children:[(0,t.jsx)(e_.DrawerTrigger,{disabled:m,asChild:!0,children:(0,t.jsx)(eL,{category:e,disabled:m})}),(0,t.jsxs)(e_.DrawerContent,{className:"max-h-[90dvh]",children:[(0,t.jsx)(e_.DrawerHeader,{children:(0,t.jsxs)(e_.DrawerTitle,{className:"flex items-center justify-center gap-2",children:[e.icon&&J.default.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),e.label]})}),(0,t.jsx)("div",{className:"p-2 space-y-2 overflow-auto",children:e.presets.map(e=>(0,t.jsxs)(h.Button,{variant:"ghost",size:"lg",className:"w-full flex items-center justify-start gap-3 h-auto py-3",onClick:()=>g(e),children:[e.icon&&J.default.createElement(e.icon,{size:18,className:"text-secondary flex-shrink-0"}),(0,t.jsx)("span",{children:e.label})]},e.presetId))})]})]}):(0,t.jsxs)(eD.DropdownMenu,{open:e.category===l,onOpenChange:()=>p(e.category),children:[(0,t.jsx)(eD.DropdownMenuTrigger,{disabled:m,asChild:!0,children:(0,t.jsx)(eL,{category:e,disabled:m})}),(0,t.jsx)(eD.DropdownMenuContent,{hideWhenDetached:!0,side:"top",sideOffset:8,className:"min-w-60 space-y-0.5 z-[100000]",onMouseLeave:()=>{u(null)},onWheel:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:e.presets.map(a=>(0,t.jsxs)(eD.DropdownMenuItem,{"data-preset-id":a.presetId,className:"flex items-center gap-2",onSelect:()=>g(a),children:[a.icon&&J.default.createElement(a.icon,{size:16,className:"text-secondary flex-shrink-0"}),a.label,c===a.presetId&&(0,eE.createPortal)((0,t.jsxs)(en.motion.div,{layoutId:"preset-preview",className:"fixed w-[200px] h-[150px] bg-surface-l4 border border-border-l1 rounded-2xl shadow-lg z-50 pointer-events-none flex items-center justify-center p-1.5",style:v(a.presetId),children:[(0,t.jsx)(eP,{className:"absolute inset-0"}),a.previewUrl&&(0,t.jsx)(eT.default,{src:a.previewUrl,alt:a.presetId,width:200,height:150,priority:!n&&l===e.category,className:"w-full h-full object-cover rounded-xl relative z-10"})]}),document.body)]},a.presetId))})]})},e.category))]})},eL=J.default.forwardRef((e,a)=>{let{category:s,disabled:i,...r}=e;return(0,t.jsxs)(h.Button,{ref:a,size:"md",variant:"filledSecondary",rounded:!0,className:(0,eu.cn)(!i&&"*:hover:text-primary transition-all"),disabled:i,...r,children:[s.icon&&J.default.createElement(s.icon,{size:16,className:"flex-shrink-0 text-secondary transition-colors"}),(0,t.jsx)("span",{children:s.label})]})});var eR=e.i(8681),eO=e.i(351958),eU=e.i(283272),eB=e.i(218946);let eF=e=>{let{onUploadImage:a}=e,{t:s}=(0,eo.useTranslation)("base"),i=(0,ey.useFileStore)(ew.prop("fetchUploadFile")),r=(0,ey.useFileStore)(ew.prop("removeByConversationId")),o=(0,n.useChatPageStore)(ew.prop("conversationId")),{ASSET_SERVER_URL:d}=(0,l.useEnvironment)(),c=(0,eB.useRequestErrorToastFn)(),u=(0,J.useRef)(null),[m,p]=(0,J.useState)(!1),[g,x]=(0,J.useState)(!1),v=(0,J.useCallback)(()=>{var e;null==(e=u.current)||e.click()},[]),f=(0,J.useCallback)(async e=>{let t;if(1!==e.length||!e[0])return void eS.toast.error(s("Only a single image file is allowed","Only a single image file is allowed"));if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e[0].type))return void eS.toast.error(s("Only image files are allowed","Only image files are allowed"));x(!0);try{let a=i(e[0],o||"no_conversation_id");t=await a.metadataPromise}catch(e){c("image-editor-upload:uploadFile",e)}t instanceof Error&&c("image-editor-upload:uploadFile",t,s("Failed to upload file","Failed to upload file")),x(!1),r(o||"no_conversation_id"),!t||t instanceof Error||a({url:(0,ef.getAssetUrl)(d,t.fileUri),metadata:t})},[s,i,o,a,d,r,c]),y=(0,J.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g||p(!0)},[g]),b=(0,J.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(!1)},[]),j=(0,J.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),p(!1),!g)return f(Array.from(e.dataTransfer.files))},[f,g]),k=(0,J.useCallback)(e=>{if(e.target.files)return f(Array.from(e.target.files)).finally(()=>{u.current&&(u.current.value="")})},[f]);return(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},onDragOver:y,onDragLeave:b,onDrop:j,className:"border resize transition-colors w-full max-w-7xl h-full flex justify-center items-center border-border-l1 rounded-2xl p-8 mb-3 text-center ".concat(m&&!g&&"bg-surface-l1 border-border-l1"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"p-4 rounded-full text-fg-secondary transition-colors bg-surface-l1",children:(0,t.jsx)(er.AnimatePresence,{mode:"popLayout",children:m&&!g?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(eR.Files,{className:"size-6"})},"files"):(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(eO.ImagePlusIcon,{className:"size-6"})},"image-plus")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-primary",children:s("Upload an image to begin","Upload an image to begin")}),(0,t.jsx)(er.AnimatePresence,{mode:"popLayout",children:g?(0,t.jsx)(en.motion.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:s("Uploading image","Uploading image")},"uploading"):m?(0,t.jsx)(en.motion.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:s("Drop image here","Drop image here")},"dragging"):(0,t.jsx)(en.motion.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary",children:s("Drag and drop to upload","Drag and drop to upload")},"not-dragging")})]}),(0,t.jsx)("div",{className:"flex gap-3",children:(0,t.jsxs)(h.Button,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:g,autoFocus:!0,onClick:v,children:[g?(0,t.jsx)(el.Spinner,{size:"xxs"}):(0,t.jsx)(eU.Upload,{className:"size-4 text-fg-secondary"}),s("Upload","Upload")]})}),(0,t.jsx)("input",{ref:u,className:"hidden",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:k,multiple:!1,"data-testid":"file-input"})]})})};var eH=e.i(420986);let eq=()=>{let{ASSET_SERVER_URL:e}=(0,l.useEnvironment)(),a=(0,$.useFeatureFlags)(),s=(0,ev.useLogEvent)(),{t:i}=(0,eo.useTranslation)("base"),r=(0,eg.useMaybeRefreshAnonSession)(),{handleSendStart:d,timeToSendStart:c,consumeTimeToSendMs:u}=(0,eh.useImageEditingMetrics)(),[m,p]=(0,ex.useLocalStorage)("image-editor-first-open",!0),g=(0,eb.useImageEditorStore)(ew.prop("isOpen")),h=(0,eb.useImageEditorStore)(ew.prop("currentImage")),x=(0,eb.useImageEditorStore)(ew.prop("setImage")),v=(0,n.useChatPageStore)(ew.prop("conversationId")),f=(0,n.useChatPageStore)(ew.prop("streamedMessageId")),y=(0,n.useChatPageStore)(ew.prop("lastMessageId")),b=(0,ej.useResponseStore)(e=>e.byId[null!=f?f:""]),j=(0,ej.useResponseStore)(ew.prop("byId")),k=(0,J.useMemo)(()=>{var e;return null!=(e=ej.useResponseStore.getState().byConversationId[null!=v?v:""])?e:[]},[v]),w=(0,eH.useGenImagineVideoFromMediaUrl)(),[S,I]=(0,J.useState)(""),[C,M]=(0,J.useState)(!1),[N,T]=(0,J.useState)(null),[E,P]=(0,J.useState)(!1),[_,D]=(0,J.useState)(!1),[A,z]=(0,J.useState)(!1),[L,R]=(0,J.useState)(!1),[O,U]=(0,J.useState)(!1),B=(0,J.useMemo)(()=>!!h,[h]),F=(0,J.useMemo)(()=>!!(h&&"key"in h),[h]),H=(0,J.useMemo)(()=>!!(h&&"metadata"in h),[h]),q=(0,J.useMemo)(()=>{if(F){if(C)return!N&&b&&T(b.responseId),b||j[null!=N?N:""];let e=k.filter(e=>e.streamingImageById).find(e=>{for(let t in e.streamingImageById){let a=e.streamingImageById[t];if(!a)continue;let s=a[100];if((null==s?void 0:s.imageUrl)===(null==h?void 0:h.url))return!0}});return e||(null==k?void 0:k.find(e=>{var t,a;return null==(t=e.generatedImageUrls)?void 0:t.includes(null!=(a=h.assetKey)?a:"")}))}},[h,k,F,C,b,N,j]),G=(0,J.useMemo)(()=>(null==q?void 0:q.parentResponseId)?j[q.parentResponseId]:void 0,[q,j]),K=(0,J.useMemo)(()=>G?(0,ef.getAssetUrl)(e,G.imageEditUri):void 0,[G,e]),V=(0,J.useMemo)(()=>{if(H){var t,a;return[{id:null!=(t=h.metadata.fileUri)?t:"",url:null!=(a=(0,ef.getAssetUrl)(e,h.metadata.fileUri))?a:"",isModerated:!1,progressMap:void 0}]}return F?q?C&&q.streamingImageById?Object.entries(q.streamingImageById).map(t=>{var a;let[s,i]=t,r=Object.keys(i).map(Number),n=i[Math.max(...r)];return{id:s,url:null!=(a=(0,ef.getAssetUrl)(e,null==n?void 0:n.imageUrl))?a:"",isModerated:!1,progressMap:r.map(t=>{var a,s;return{progress:t/100,imageUrl:null!=(s=(0,ef.getAssetUrl)(e,null==(a=i[t])?void 0:a.imageUrl))?s:""}})}}):q.generatedImageUrls.map(t=>{var a,s;let i=null!=(s=Object.values(null!=(a=q.streamingImageById)?a:{})[0])?s:{},r=Object.keys(i).map(Number);return{id:t,url:(0,ef.getAssetUrl)(e,t),isModerated:!1,progressMap:r.length>0?r.map(t=>{var a,s;return{progress:t/100,imageUrl:null!=(s=(0,ef.getAssetUrl)(e,null==(a=i[t])?void 0:a.imageUrl))?s:""}}):void 0}}):[]:[]},[h,q,F,C,e,H]),W=(0,J.useMemo)(()=>V.length>1?V.find(e=>e.id===(null==h?void 0:h.key)||e.id===(null==h?void 0:h.assetKey)):V[0],[V,h]),Y=(0,J.useMemo)(()=>(0,t.jsx)(eC,{isEditingCurrentImage:C,focusedImage:W,parentImageUrl:L?void 0:K,isPeekingParent:E,setIsPeekingParent:P,generatedImageWidth:null==q?void 0:q.generatedImageWidth,generatedImageHeight:null==q?void 0:q.generatedImageHeight,isParentImageLoaded:A,isFinalImageLoaded:O,setIsFinalImageLoaded:U,setIsParentImageLoaded:z}),[C,W,E,K,null==q?void 0:q.generatedImageWidth,null==q?void 0:q.generatedImageHeight,A,O,L]),Q=(0,J.useCallback)(()=>{(null==W?void 0:W.url)&&w(W.url).catch(e=>{(0,ei.logError)("image-editor:handleMakeVideo",e)})},[null==W?void 0:W.url,w]),X=(0,J.useCallback)(e=>{e&&x(e)},[x]),Z=(0,J.useCallback)(e=>{let t=V[e];t&&(C&&x({key:t.id}),x({key:t.id,assetKey:t.id,url:t.url,isModerated:t.isModerated,progress:(null==t?void 0:t.progressMap)?Math.max(...Object.keys(t.progressMap).map(Number)):1}))},[V,C,x]),ee=(0,J.useCallback)(async e=>(D(!0),e().finally(()=>{D(!1)})),[]),et=(0,o.useHandleAbort)("image-workbench:handleAbort",ee),ea=(0,J.useCallback)(async(e,t)=>{if(!e.trim()||!(null==h?void 0:h.url))throw Error("No message or image");let s=n.useChatPageStore.getState(),i=ek.useSettingsStore.getState(),o=ej.useResponseStore.getState(),l=ey.useFileStore.getState(),d=t.replace(/^https?:\/\/[^/]+\/?/,"");I(""),l.removeByConversationId(s.conversationId||"no_conversation_id"),l.removeAttachByConversationId(s.conversationId||"no_conversation_id"),await r();let c=s.lastMessageId?o.byId[s.lastMessageId]:void 0;if(s.lastMessageId&&!c)throw Error("Last message is missing");if((null==c?void 0:c.sender)==="human")throw Error("Last message is human");"none"!==s.reasoningMode&&s.setReasoningMode("none");let u={message:e,toolOverrides:{imageGen:!0},imageEditUri:d,enableRetries:!0},m=H&&h.metadata.fileMetadataId&&!(null==G?void 0:G.message)?[h.metadata.fileMetadataId]:[];if(H)return s.conversationId?s.sendResponse({...u,parentResponseId:s.lastMessageId,conversationId:s.conversationId,fileAttachmentIds:m,webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,ff:a}):s.establishNewConversation({...u,fileAttachmentIds:[h.metadata.fileMetadataId],temporary:i.isIncognito,ff:a});if(!s.conversationId)throw Error("No conversation id");return s.sendResponse({...u,parentResponseId:s.lastMessageId,conversationId:s.conversationId,fileAttachmentIds:m,webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,ff:a})},[h,r,H,G,a]),es=(0,J.useCallback)(async(e,t)=>{let a=n.useChatPageStore.getState(),s=ej.useResponseStore.getState(),i=a.streamedMessageId?s.byId[a.streamedMessageId]:void 0;return["streaming","optimistic","reconnecting"].includes((null==i?void 0:i.state)||"closed")&&await et(),M(!0),ea(e,t).catch(()=>{eb.useImageEditorStore.getState().close()})},[ea,et]),en=(0,J.useCallback)(async(e,t)=>{if(e.trim()&&(null==W?void 0:W.url))return(s("edit_image_start",(0,eh.formatImageEditUri)(W.url),{queryType:t?"preset":"manual",location:"image-editor",presetId:t||"",message:e,messageLength:String(e.length),timeToSendMs:String(u())}),"make-video"===t)?Q():es(e,W.url).catch(e=>{(0,ei.logError)("image-viewer:ImageEditor:handleEditCurrentImage",e)})},[es,W,s,u,Q]),el=(0,J.useCallback)(()=>{if((null==G?void 0:G.message)&&K)return s("edit_image_start",(0,eh.formatImageEditUri)(K),{queryType:"regenerate",location:"image-editor",presetId:"",message:null==G?void 0:G.message,messageLength:String(null==G?void 0:G.message),timeToSendMs:String(u())}),es(G.message,K).catch(e=>{(0,ei.logError)("image-viewer:ImageEditor:handleRegenerate",e)})},[G,K,es,s,u]);(0,J.useEffect)(()=>{C&&V.length&&V[0]&&!V.find(e=>e.id===h.key)&&x({key:V[0].id})},[V,C,h,x]),(0,J.useEffect)(()=>{let t=eb.useImageEditorStore.getState();if(C&&b&&"error"===b.state)return t.close();if(C&&N&&b&&"closed"===b.state){var a,i,r,n;if(M(!1),T(null),!y)return t.close();let o=j[y];if(!o)return t.close();let l=null==(r=o.streamingImageById)||null==(i=r[null!=(n=null==h?void 0:h.key)?n:""])||null==(a=i[100])?void 0:a.imageUrl;if(!l)return t.close();s("edit_image_end",(0,eh.formatImageEditUri)((null==G?void 0:G.imageEditUri)||""),{location:"image-editor"}),x({key:l,assetKey:l,url:(0,ef.getAssetUrl)(e,l),progress:100,isModerated:!1})}},[G,b,C,N,y,j,e,s,x]),(0,J.useEffect)(()=>{C||_||void 0!==c||d()},[u,d,C,_,c]),(0,J.useEffect)(()=>{if(null==W?void 0:W.url){U(!1);let e=new Image;e.onload=()=>U(!0),e.src=W.url}},[null==W?void 0:W.url]),(0,J.useEffect)(()=>{if(K){z(!1),R(!1);let e=new Image;e.onload=()=>z(!0),e.onerror=()=>R(!0),e.src=K}},[K]),(0,J.useEffect)(()=>{m&&g&&(p(!1),eS.toast.message((0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-fg-primary font-bold",children:i("image-editor-welcome.title","Welcome to Image Editor")}),(0,t.jsx)("p",{className:"text-fg-secondary",children:i("image-editor-welcome.description","A focused space for you to transform images with Grok to anything you can imagine.")})]}),{duration:7e3}))},[m,g,p,i]);let ec=(0,eb.useImageEditorStore)(ew.prop("close"));return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-between gap-6 sm:gap-20 w-full h-full",children:[(0,t.jsx)(ed,{hasImage:B,prompt:K?null==G?void 0:G.message:void 0,focusedImageUrl:null==W?void 0:W.url,parentImageUrl:L?void 0:K,isStreaming:C||_,onParentPeek:e=>P(e),onClose:ec,onRegenerate:el}),B?Y:g&&(0,t.jsx)(eF,{onUploadImage:X}),(0,t.jsx)("footer",{className:"relative w-full max-w-2xl h-16 flex-shrink-0 mt-12 sm:mt-0",children:(0,t.jsxs)("div",{className:"absolute bottom-0 inset-x-0 flex flex-col gap-4",children:[(0,t.jsx)(er.AnimatePresence,{mode:"popLayout",children:B&&V&&V.length>1&&(0,t.jsx)(em,{isStreaming:C||_,images:V,focusedOption:V.findIndex(e=>e.id===(null==W?void 0:W.id))||0,onSelect:Z})}),(0,t.jsx)(ez,{hasImage:B,isStreaming:C||_,onSend:en}),(0,t.jsx)(ep.ImageEditorQueryBar,{hasImage:B,inputValue:S,isStreaming:C||_,onInputValueChange:I,onSend:en,onAbort:et})]})})]})};var eG=e.i(687712),eK=e.i(436562),eV=e.i(402423);let eW=()=>{let{t:e}=(0,eo.useTranslation)("base"),a=(0,ev.useLogEvent)(),s=(0,eb.useImageEditorStore)(ew.prop("isOpen")),i=(0,eb.useImageEditorStore)(ew.prop("close")),r=(0,n.useChatPageStore)(ew.prop("conversationId")),[o,l]=(0,J.useState)(void 0),{handleEditorOpen:d,consumeEditorTimeMs:c,editorOpenTime:u}=(0,eh.useImageEditingMetrics)();return(0,J.useEffect)(()=>{s&&void 0===u?d():s||void 0===u||a("image_editor_close",void 0,{timeInEditorMs:String(c()),location:"image-editor-dialog"})},[s,d,c,a,u]),(0,J.useEffect)(()=>{r!==o&&(o&&i(),l(r))},[r,i,o]),(0,t.jsx)(eK.Dialog,{open:s,onOpenChange:e=>{e||i()},children:(0,t.jsxs)(eG.DialogPortal,{children:[(0,t.jsx)(eK.DialogOverlay,{className:"fixed inset-0 z-50 bg-overlay duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,t.jsxs)(eK.DialogContent,{"aria-describedby":e("image-editor.title","Image editor"),className:(0,eu.cn)("fixed z-50 inset-0 bg-background duration-200 focus:outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 p-2 lg:p-6"),onCloseAutoFocus:e=>{e.preventDefault(),document.body.style.pointerEvents=""},children:[(0,t.jsx)(eV.VisuallyHidden,{children:(0,t.jsx)(eG.DialogTitle,{children:e("image-editor.title","Image editor")})}),(0,t.jsx)(eq,{})]})]})})};var eY=e.i(572848),eQ=e.i(729009),eX=e.i(713087),eJ=e.i(626205),eZ=e.i(157695),e$=e.i(479268),e0=e.i(724499),e1=e.i(136783),e2=e.i(61098),e3=e.i(880020),e4=e.i(383293);e.i(31157);var e5=e.i(171686),e8=e.i(938270),e6=e.i(489843),e9=e.i(230433),e7=e.i(132841),te=e.i(840580),tt=e.i(934652);let ta=e=>{let{height:a,width:s}=e,{i18n:i}=(0,eo.useTranslation)("chat"),{isSuperGrokUser:n,isSuperGrokProUser:o}=(0,e9.useSubscriptions)(),{isSwitchingTeam:l}=(0,tt.useEnterprise)(),d=(0,e7.useIsActiveGrokBusinessSession)(),c=(0,ek.useSettingsStore)(ew.prop("selectedLanguage")),[u,m]=(0,J.useState)(0),p=(0,J.useMemo)(()=>c||i.languages.find(e=>e in te.supportedLocaleToLanguage)||te.globalLocale,[c,i.languages]),[g,h]=(0,J.useState)({isSuperGrokProUser:o,isSuperGrokUser:n,usingGrokBusiness:d});return(0,J.useEffect)(()=>{l||h(e=>(e.usingGrokBusiness!==d&&m(e=>e+1),{isSuperGrokProUser:o,isSuperGrokUser:n,usingGrokBusiness:d}))},[o,n,d,l,h]),(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:(0,t.jsx)(en.motion.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},children:g.usingGrokBusiness?(0,t.jsx)(r.BlackholeGrokBusinessLogo,{height:a,width:s}):g.isSuperGrokProUser?"ja"===p?(0,t.jsx)(r.SuperGrokHeavyJpLogo,{height:a,width:s}):(0,t.jsx)(r.SuperGrokHeavyLogo,{height:a,width:s}):g.isSuperGrokUser?"ja"===p?(0,t.jsx)(r.SuperGrokJpLogo,{height:a,width:s}):(0,t.jsx)(r.BlackholeSuperGrokLogo,{height:a,width:s}):"ja"===p?(0,t.jsx)(r.BlackholeGrokJpLogo,{height:a,width:s}):(0,t.jsx)(r.BlackholeGrokLogo,{height:a,width:s})},"logo-".concat(u))})};var ts=e.i(826921),ti=e.i(493845),tr=e.i(235289),tn=e.i(798045),to=e.i(660168),tl=e.i(243634),td=e.i(334172),tc=e.i(785239),tu=e.i(389052),tm=e.i(892621);e.s(["ImagineBanner",()=>ty],416872);var tp=e.i(584244),tg=e.i(443696),th=e.i(81795),tx=e.i(926836),tv=e.i(10404);let tf=0;function ty(e){let{persistentBanner:a=!1}=e,{user:s}=(0,eY.useSession)(),{os:i}=(0,tx.useOs)(),r=(0,e2.useRouter)(),n=(0,ev.useLogEvent)(),o=(0,eN.useMobileSize)(),{push:l}=(0,e0.useRouting)(),[d,c]=(0,ex.useLocalStorage)("visited-imagine2",!1),[u,p]=(0,ex.useLocalStorage)("imagine-banner-impressions2",0);(0,J.useEffect)(()=>{!a&&(Date.now()<tf||(tf=Date.now()+12e4,p(e=>e+1)))},[]);let{resolvedTheme:g}=(0,th.useTheme)(),h=(0,J.useCallback)(e=>{e.stopPropagation(),n("imagine_banner_clicked","imagine-banner",{location:"imagine-banner"}),l({page:"imagine"})},[l,n]),x=(0,J.useCallback)(e=>{e.stopPropagation(),c(!0),n("imagine_banner_dismissed","imagine-banner",{location:"imagine-banner"})},[c,n]);(0,J.useEffect)(()=>{n("imagine_banner_impression","imagine-banner",{location:"imagine-banner"})},[]);let v=(0,J.useCallback)(e=>{e.stopPropagation(),n("imagine_banner_clicked","imagine-banner",{location:"imagine-banner"});let t=new URLSearchParams({return_to:"/imagine"}).toString();n("sign_up_redirect",i,{location:"imagine-banner",os:i}),r.push("/sign-up".concat(t?"?".concat(t):""))},[n,i,r]),f=(0,J.useCallback)(e=>{e.stopPropagation(),n("imagine_banner_clicked","imagine-banner",{location:"imagine-banner"});let t=new URLSearchParams({return_to:"/imagine"}).toString();n("sign_in_redirect",i,{location:"imagine-banner",os:i}),r.push("/sign-in".concat(t?"?".concat(t):""))},[n,i,r]),{t:y}=(0,eo.useTranslation)("imagine");return(0,t.jsxs)("div",{className:(0,eu.cn)("relative dark max-w-[480px] w-full m-10",{"m-0 mb-24 mx-2":o}),children:[(0,t.jsxs)("div",{className:(0,eu.cn)("flex dark flex-col items-center justify-center w-full rounded-3xl overflow-hidden  cursor-pointer bg-surface-l1 ",{"border-2 border-color-surface-l1":"dark"===g}),onClick:h,children:[(0,t.jsx)("div",{className:"relative w-full h-[110px] overflow-hidden",children:(0,t.jsx)(eT.default,{priority:!0,quality:50,src:"/imagine-banner2.jpg",alt:y("imagine.banner.image.alt","Imagine promo banner image"),fetchPriority:"high",loading:"eager",fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between px-4 pt-0 pb-3 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("p",{className:"dark text-primary text-sm font-bold m-0 p-0",children:y("imagine.banner_upgrades.title","Grok Imagine Upgrades")}),(0,t.jsx)(tv.NotificationBlip,{variant:"sm"})]}),(0,t.jsx)("p",{className:"dark text-fg-secondary text-sm m-0 p-0 ",children:y("imagine.banner_upgrades.subtitle","Generate videos with built-in audio - plus enhanced lifelike motion and character consistency")})]}),s&&(0,t.jsx)(tg.Button,{variant:"secondary",shape:"pill",size:"md",className:"dark font-bold text-primary",onClick:h,children:y("imagine.banner_upgrades.button","Try Now")})]}),!s&&(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-start justify-start mb-3",children:[(0,t.jsxs)(tg.Button,{className:"font-semibold text-sm",variant:"primary",size:"sm",shape:"pill",onClick:v,children:[(0,t.jsx)(tp.User,{size:14}),y("Sign up","Sign up")]}),(0,t.jsx)(tg.Button,{className:"font-semibold text-sm",variant:"secondary",size:"sm",shape:"pill",onClick:f,children:y("Sign in","Sign in")})]})]}),!a&&(0,t.jsx)(tg.Button,{variant:"tertiary",shape:"circle",size:"xs",className:"dark font-bold text-primary absolute -top-2 -end-2 bg-surface-l2 hover:bg-surface-l4",onClick:x,"aria-label":"Close",children:(0,t.jsx)(m.XIcon,{className:"size-4"})})]})}var tb=e.i(407725),tj=e.i(997339),tk=e.i(517176),tw=e.i(168413);function tS(e){let{children:a,isValidProp:s,...i}=e;s&&(0,tk.loadExternalIsValidProp)(s),(i={...(0,J.useContext)(tj.MotionConfigContext),...i}).isStatic=(0,tw.useConstant)(()=>i.isStatic);let r=(0,J.useMemo)(()=>i,[JSON.stringify(i.transition),i.transformPagePoint,i.reducedMotion]);return(0,t.jsx)(tj.MotionConfigContext.Provider,{value:r,children:a})}var tI=e.i(815628),tC=e.i(410289),tM=e.i(749894),tN=e.i(944408),tT=e.i(229439);e.s(["useConversationTemplatePresets",()=>tA],512122);var tE=e.i(373882),tP=e.i(952447);let t_=(0,p.default)("UserRoundSearch",[["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62",key:"1yezr2"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"m22 22-1.9-1.9",key:"1e5ubv"}]]);var tD=e.i(798554);let tA=()=>({presets:tz}),tz=[{icon:tP.MessageCircleIcon,name:"Meeting Summary",description:"Summarize meeting transcripts into clear, actionable notes",systemPrompt:"You are a meeting notes assistant. Summarize the transcript into:\n- Decisions (what was agreed)\n- Action Items (with owners & deadlines)\n- Discussion Highlights (key topics covered).",inputGuidance:"Paste or upload the meeting transcript"},{icon:t_,name:"Candidate Evaluation",description:"Create a structured assessment of a candidates fit for a role",systemPrompt:"You are an HR assistant. Compare the CV against the job description. Write a structured report with:\n- Green Flags (strengths)\n- Red Flags (concerns)\n- Summary (overall impression)\n- Fit Score (110 with rationale).",inputGuidance:"Upload the candidates CV and paste the job description"},{icon:tE.LanguagesIcon,name:"Translate",description:"Translate English text into multiple languages",systemPrompt:"You are a professional translator. Translate the provided English text into: Chinese, Spanish, Hindi, Portuguese, Bengali, Russian, and Japanese. For each language, provide 3 natural variations that preserve the meaning and tone.",inputGuidance:"Paste English text you want to translate"},{icon:tD.Wrench,name:"Incident Report Draft",description:"Turn raw incident notes into a standardized postmortem draft",systemPrompt:"You are an SRE incident analyst. Write a postmortem report with:\n- Summary\n- Impact\n- Root Cause\n- Timeline of Events\n- Remediation / Prevention steps.",inputGuidance:"Upload incident notes, logs, or a timeline of events"}];e.i(298616);var tL=e.i(969286),tR=e.i(154580),tO=e.i(364778),tU=e.i(194693),tB=e.i(840116);let tF=e=>{let{className:a}=e,{t:s}=(0,eo.useTranslation)("base"),{push:i}=(0,e0.useRouting)(),r=(0,tR.useQueryClient)(),{shouldShow:n,dismiss:o}=(0,tU.useTourGuideTooltip)({tooltipId:"templates"}),[l,d]=(0,J.useState)(!1),[c,u]=(0,ex.useLocalStorage)("landing-page-templates.order-by","usageCount"),{results:m,isError:p,isLoading:g}=(0,tb.useListConversationTemplates)({orderBy:c,sharedWithMe:!1,pageSize:4}),{presets:h}=tA(),{mutate:x,isPending:v}=(0,tL.useMutation)({mutationFn:e=>tO.grokForTeamsApi.grokForTeamsTemplatesCreateTemplate({body:e})}),f=(0,J.useCallback)(e=>{let{templateName:t,templateDescription:a,inputGuidance:n,systemPrompt:l,assets:d,redirect:c}=e;if(!v)return o(),x({templateName:t||"",templateDescription:a||"",inputGuidance:n||"",systemPrompt:l||"",assets:d||[],sharedWithTeam:!1},{onSuccess:e=>{let{template:t}=e;if(t&&t.templateId)return"start-conversation"===c?i({page:"main",templateId:t.templateId}):"template-form"===c&&i({page:"templates",tab:"personal",templateId:t.templateId}),r.invalidateQueries({queryKey:(0,tb.getConversationTemplatesQueryKey)({})})},onError:()=>{eS.toast.error(s("templates.failed-to-create-template","Failed to create template"))}})},[i,x,r,s,v,o]);return(0,t.jsx)(tS,{transition:{duration:.2,ease:"easeInOut"},children:(0,t.jsxs)("div",{className:(0,eu.cn)("@container/template-widget w-full",a),children:[(0,t.jsxs)("div",{className:"px-4 flex justify-between items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2.5",children:[(0,t.jsx)(tB.TourGuideBubble,{shouldShow:n,onDismiss:o,title:s("templates.guide-tooltip.title","Templates"),description:s("templates.guide-tooltip.description","Use templates to turn prompts into reusable starting points, making recurring tasks faster and more consistent."),badgeText:s("templates.guide-tooltip.new","new"),tooltipContentProps:{side:"right",sideOffset:4},children:(0,t.jsx)("div",{className:"text-base font-semibold text-fg-primary",children:s("templates.title","Templates")})}),(0,t.jsxs)(eD.DropdownMenu,{open:l,onOpenChange:d,children:[(0,t.jsx)(eD.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)("button",{className:"text-sm text-fg-tertiary flex items-center gap-1 focus:outline-none cursor-pointer focus:ring-1 ring-primary pl-1.5 p-1 -my-1 -ml-1.5 rounded-lg",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"createTime"===c?s("templates.order-by.create-time","Most recent"):s("templates.order-by.usage-count","Most used")}),(0,t.jsx)(tN.ChevronDownIcon,{className:(0,eu.cn)("size-3.5 text-fg-tertiary transition-transform",{"rotate-180":l})})]})}),(0,t.jsxs)(eD.DropdownMenuContent,{sideOffset:8,side:"bottom",align:"end",className:"min-w-40",children:[(0,t.jsxs)(eD.DropdownMenuItem,{onSelect:()=>u("createTime"),className:"flex items-center gap-2 justify-between",children:[(0,t.jsx)("span",{children:s("templates.order-by.create-time","Most recent")}),"createTime"===c&&(0,t.jsx)(tM.CheckIcon,{className:"text-fg-primary size-4"})]},"createTime"),(0,t.jsxs)(eD.DropdownMenuItem,{onSelect:()=>u("usageCount"),className:"flex items-center gap-2 justify-between",children:[(0,t.jsx)("span",{children:s("templates.order-by.usage-count","Most used")}),"usageCount"===c&&(0,t.jsx)(tM.CheckIcon,{className:"text-fg-primary size-4"})]},"usageCount")]})]})]}),(0,t.jsx)(e0.Link,{onClick:o,route:{page:"templates",tab:"personal"},className:"text-sm text-fg-tertiary font-semibold hover:text-fg-secondary transition-all outline-none focus:ring-1 ring-primary rounded-lg px-2 py-1 -m-2",children:s("templates.see-all","See all")})]}),p?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-center items-center mx-4 py-6 mt-4 border border-border-l1 rounded-2xl",children:(0,t.jsx)("span",{className:"text-fg-tertiary text-sm",children:s("templates.failed-to-load","Failed to load templates")})},"error"):g||m.length?(0,t.jsx)("div",{className:"px-4 mt-4 grid grid-cols-2 w-full gap-4",children:(0,t.jsx)(er.AnimatePresence,{initial:!1,children:Array.from({length:4}).map((e,a)=>{let s=m[a];return(0,t.jsx)(tH,{template:s,isLoading:g,onCustomTemplateSelect:()=>f({redirect:"template-form"}),onPresetTemplateSelect:e=>f({templateName:e.templateName,templateDescription:e.templateDescription,inputGuidance:e.inputGuidance,systemPrompt:e.systemPrompt,redirect:"template-form"})},"template-".concat(a))})})}):(0,t.jsxs)("div",{className:"rounded-2xl border border-border-l1 flex flex-col justify-center items-center gap-4 p-6 mt-4",children:[(0,t.jsx)("div",{className:"text-sm text-fg-secondary font-semibold",children:s("templates.try-preset-templates","Try these templates")}),(0,t.jsxs)("div",{className:"flex items-center justify-center flex-wrap gap-3 max-w-lg",children:[h.slice(0,4).map(e=>(0,t.jsx)("div",{onClick:()=>f({templateName:e.name,templateDescription:e.description,inputGuidance:e.inputGuidance,systemPrompt:e.systemPrompt,redirect:"start-conversation"}),className:"px-3 py-1.5 rounded-full bg-surface-l1 border border-border-l1 hover:bg-surface-l2 transition-colors cursor-pointer",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{children:(0,t.jsx)(e.icon,{size:16,className:"text-fg-secondary"})}),(0,t.jsx)("span",{className:"text-fg-primary font-semibold text-sm truncate",children:e.name})]})},e.name)),(0,t.jsxs)(tg.Button,{variant:"secondary",size:"sm",shape:"pill",onClick:()=>f({redirect:"template-form"}),children:[(0,t.jsx)(tT.Plus,{size:18,className:"-ml-0.5"}),s("templates.add-new","Add")]})]})]})]})})},tH=e=>{let{template:a,isLoading:s,onCustomTemplateSelect:i,onPresetTemplateSelect:r}=e,{t:n}=(0,eo.useTranslation)("base"),{presets:o}=tA(),[l,d]=(0,J.useState)(!1),{startConversationWithTemplate:c}=(0,tI.useConversationTemplate)({templateId:(null==a?void 0:a.templateId)||null}),u=(0,J.useMemo)(()=>!s&&!a,[s,a]),m=(0,J.useCallback)(e=>{u&&d(e)},[u]),p=(0,J.useCallback)(()=>{a&&!s&&c()},[a,s,c]);return(0,t.jsxs)(eD.DropdownMenu,{open:l,onOpenChange:m,children:[(0,t.jsx)(eD.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(en.motion.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p,className:(0,eu.cn)("group p-3 flex flex-col bg-surface-l1 border border-border-l1 rounded-2xl transition-colors relative outline-none focus:ring-1 ring-primary",{"cursor-pointer hover:bg-surface-l2":!s,"bg-transparent":u,"bg-surface-l2":l}),children:[(0,t.jsx)("div",{className:"h-5 flex items-center min-w-0",children:(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:s?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(tC.Skeleton,{className:"h-3 w-40 rounded-sm"})},"loading-name"):a&&(0,t.jsx)(en.motion.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-primary font-semibold truncate",children:a.templateName||n("templates.values.name.placeholder","New Template")},"title")})}),(0,t.jsx)("div",{className:"h-5 flex items-center min-w-0 ",children:(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:s?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(tC.Skeleton,{className:"h-3 w-24 rounded-sm"})},"loading-description"):a&&(0,t.jsx)(en.motion.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-fg-secondary text-sm truncate",children:a.templateDescription||n("templates.values.description.placeholder","Description")},"description")})}),(0,t.jsx)(er.AnimatePresence,{initial:!1,children:u&&(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,eu.cn)("absolute inset-0 flex justify-center items-center"),children:(0,t.jsx)(tT.Plus,{size:20,className:(0,eu.cn)("opacity-25 group-hover:opacity-50 transition-opacity",{"opacity-50":l})})},"empty-state")}),u&&(0,t.jsx)("span",{className:"sr-only",children:n("templates.values.name.placeholder","New Template")})]})}),u&&(0,t.jsxs)(eD.DropdownMenuContent,{align:"end",sideOffset:8,children:[(0,t.jsxs)(eD.DropdownMenuItem,{className:"flex items-center gap-2",onSelect:i,children:[(0,t.jsx)(tT.Plus,{size:16,className:"text-secondary flex-shrink-0"}),(0,t.jsx)("p",{children:n("templates.custom-template","Custom Template")})]}),o.map(e=>(0,t.jsxs)(eD.DropdownMenuItem,{className:"flex items-center gap-2",onSelect:()=>null==r?void 0:r({templateName:e.name,templateDescription:e.description,inputGuidance:e.inputGuidance,systemPrompt:e.systemPrompt}),children:[(0,t.jsx)(e.icon,{size:16,className:"text-secondary flex-shrink-0"}),(0,t.jsx)("p",{children:e.name})]},e.name))]})]})};var tq=e.i(540942),tG=e.i(910503),tK=e.i(432286),tV=e.i(738416);function tW(e){return(0,tV.startOfDay)(Date.now(),e)}var tY=e.i(921127),tQ=e.i(119470),tX=e.i(495794);function tJ(e,t,a){return(0,tX.addMonths)(e,-t,a)}var tZ=function(e){return e.PAST_30_DAYS="past-30-days",e.THIS_MONTH="this-month",e.THIS_YEAR="this-year",e.PAST_3_MONTHS="past-3-months",e.PAST_6_MONTHS="past-6-months",e}({});let t$=e=>{let{isError:a,title:s,timeRangeOptions:i,selectedTimeRange:r,onTimeRangeChange:n,children:o}=e,{t:l}=(0,eo.useTranslation)("base"),[d,c]=(0,J.useState)(!1),u=(0,J.useCallback)(e=>{switch(e){case"past-30-days":return l("team-insights.time-range.past-30-days","Past 30 days");case"this-month":return l("team-insights.time-range.this-month","This month");case"this-year":return l("team-insights.time-range.this-year","This year");case"past-3-months":return l("team-insights.time-range.past-3-months","Past 3 months");case"past-6-months":return l("team-insights.time-range.past-6-months","Past 6 months")}},[l]),m=(0,J.useMemo)(()=>u(r),[r,u]);return(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-xs text-fg-secondary",children:s}),(null==i?void 0:i.length)?(0,t.jsxs)(eD.DropdownMenu,{open:d,onOpenChange:c,children:[(0,t.jsxs)(eD.DropdownMenuTrigger,{className:"text-xs text-fg-tertiary flex items-center gap-1 focus:outline-none",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:m}),(0,t.jsx)(tN.ChevronDownIcon,{className:(0,eu.cn)("size-3 text-fg-tertiary transition-transform",{"rotate-180":d})})]}),(0,t.jsx)(eD.DropdownMenuContent,{sideOffset:8,align:"end",className:"min-w-40",children:i.map(e=>(0,t.jsxs)(eD.DropdownMenuItem,{onSelect:()=>null==n?void 0:n(e),className:"flex items-center gap-2 justify-between",children:[(0,t.jsx)("span",{children:u(e)}),e===r&&(0,t.jsx)(tM.CheckIcon,{className:"text-fg-primary size-4"})]},e))})]}):(0,t.jsx)("span",{className:"text-xs text-fg-tertiary",children:m})]}),(0,t.jsx)("div",{className:"flex flex-col justify-between mt-3 w-full h-12",children:a?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-center items-center h-full border border-border-l1 rounded-2xl",children:(0,t.jsx)("span",{className:"text-fg-tertiary text-sm",children:l("team-insights.error-loading-data","Could not load data")})},"error"):o})]})},t0=e=>{switch(e){case"past-30-days":return(0,tQ.subDays)(tW(),29).toISOString();case"this-month":return(0,tK.startOfMonth)(tW()).toISOString();case"this-year":return(0,tY.startOfYear)(tW()).toISOString();case"past-3-months":return(0,tK.startOfMonth)(tJ(tW(),2)).toISOString();case"past-6-months":return(0,tK.startOfMonth)(tJ(tW(),5)).toISOString()}};var t1=e.i(203857);let t2=()=>{let{t:e}=(0,eo.useTranslation)("base"),{currentTeam:a,isSwitchingTeam:s}=(0,tt.useEnterprise)(),[i,r]=(0,ex.useLocalStorage)("team-insights.messages-counters-time-range",tZ.THIS_MONTH),n=(0,J.useMemo)(()=>t0(i),[i]),{data:o,isFetching:l,isError:d}=(0,tG.useQuery)({queryKey:["team-stats",null==a?void 0:a.teamId,n],queryFn:async()=>tO.grokForTeamsApi.grokForTeamsGetTeamStats({fromTime:n,maxEntries:3}),enabled:!!(null==a?void 0:a.teamId)&&!s,staleTime:1/0}),c=(0,J.useMemo)(()=>l||s,[l,s]),u=(0,t1.useDebouncedValue)(c,300,[c]),m=(0,J.useMemo)(()=>[{count:parseInt(u?"0":(null==o?void 0:o.messageCount)||"0"),label:e("team-insights.you","You")},{count:parseInt(u?"0":(null==o?void 0:o.totalMessages)||"0"),label:e("team-insights.team","Team")}],[o,e,u]);return(0,t.jsx)(t$,{title:e("team-insights.messages","Messages"),timeRangeOptions:[tZ.THIS_MONTH,tZ.PAST_3_MONTHS,tZ.PAST_6_MONTHS,tZ.THIS_YEAR],selectedTimeRange:i,onTimeRangeChange:e=>r(e),isError:d,children:m.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("span",{className:"text-xs text-fg-secondary",children:e.label}),(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:c?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-6 flex items-center justify-end",children:(0,t.jsx)(tC.Skeleton,{className:(0,eu.cn)("h-2 w-10 rounded-sm",{"w-20":1===a})})},"loading"):(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"h-6",children:(0,t.jsx)(tq.default,{value:e.count,className:"text-sm font-semibold"})},"count")})]},e.label))})},t3=()=>{let{t:e}=(0,eo.useTranslation)("base"),{currentTeam:a,isSwitchingTeam:s}=(0,tt.useEnterprise)(),[i,r]=(0,ex.useLocalStorage)("team-insights.sharing-leaderboard-time-range",tZ.THIS_MONTH),n=(0,J.useMemo)(()=>t0(i),[i]),{data:o,isFetching:l,isError:d}=(0,tG.useQuery)({queryKey:["team-stats",null==a?void 0:a.teamId,n],queryFn:async()=>tO.grokForTeamsApi.grokForTeamsGetTeamStats({fromTime:n,maxEntries:3}),enabled:!!(null==a?void 0:a.teamId)&&!s,staleTime:1/0}),c=(0,J.useMemo)(()=>l||s,[l,s]),u=(0,J.useMemo)(()=>{var e,t;let a=Array.from({length:3}).map(()=>({name:" - ",shareLinkCount:0}));return[...(null==o||null==(t=o.topUsers)||null==(e=t.map(e=>{var t,a;return{name:"".concat(null==(t=e.user)?void 0:t.givenName," ").concat(null==(a=e.user)?void 0:a.familyName),shareLinkCount:parseInt(e.shareLinkCount||"0")}}))?void 0:e.sort((e,t)=>t.shareLinkCount-e.shareLinkCount))||[],...a].slice(0,3)},[o]);return(0,t.jsx)(t$,{title:e("team-insights.top-sharers","Top sharers"),timeRangeOptions:[tZ.THIS_MONTH,tZ.PAST_3_MONTHS,tZ.PAST_6_MONTHS,tZ.THIS_YEAR],selectedTimeRange:i,onTimeRangeChange:e=>r(e),isError:d,children:u.map((a,s)=>{let{name:i,shareLinkCount:r}=a;return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full h-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0",children:[(0,t.jsx)("span",{className:"text-fg-secondary text-[12px] w-3 text-start tabular-nums",children:s+1}),(0,t.jsx)(er.AnimatePresence,{initial:!1,mode:"wait",children:c?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(tC.Skeleton,{className:"h-2 w-20 rounded-sm"})},"loading"):(0,t.jsx)(en.motion.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-fg-primary text-xs truncate",children:i},"name")})]}),(0,t.jsx)(er.AnimatePresence,{initial:!1,mode:"wait",children:c?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(tC.Skeleton,{className:"h-2 w-20 rounded-sm"})},"loading"):(0,t.jsx)(en.motion.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xs text-fg-tertiary whitespace-nowrap",children:e("team-insights.share-count","{{count}} shared",{count:r})},"count")})]},"".concat(s,"-").concat(i))})})};var t4=e.i(355524),t5=e.i(103882);e.i(406151);var t8=e.i(488842),t6=function(e){return e[e.NONE=0]="NONE",e[e.LOW=1]="LOW",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=3]="HIGH",e[e.VERY_HIGH=4]="VERY_HIGH",e}(t6||{});let t9=()=>{let{t:e}=(0,eo.useTranslation)("base"),{resolvedTheme:a}=(0,th.useTheme)(),{currentTeam:s,isSwitchingTeam:i}=(0,tt.useEnterprise)(),r=(0,J.useMemo)(()=>t0(tZ.PAST_30_DAYS),[]),{data:n,isLoading:o,isError:l}=(0,tG.useQuery)({queryKey:["team-stats",null==s?void 0:s.teamId,r],queryFn:async()=>tO.grokForTeamsApi.grokForTeamsGetTeamStats({fromTime:r,maxEntries:3}),enabled:!!(null==s?void 0:s.teamId)&&!i,staleTime:1/0}),d=(0,J.useMemo)(()=>{let e=Array.from({length:30}).map((e,t)=>{var a,s,i;let o=new Date(r);return o.setDate(o.getDate()+t),parseInt((null==n||null==(i=n.teamStats)||null==(s=i.stats)||null==(a=s.find(e=>e.startTime&&(0,t5.isSameDay)(e.startTime,o)))?void 0:a.totalMessages)||"0")}),t=e.filter(e=>e>0),a=[0,1,20,50];if(t.length>0){let e=[...t].sort((e,t)=>e-t),s=e[Math.floor(.25*e.length)]||1;a=[0,s,e[Math.floor(.5*e.length)]||1,e[Math.floor(.75*e.length)]||1]}return Array.from({length:30}).map((t,s)=>{let i=new Date(r);i.setDate(i.getDate()+s);let n=e[s]||0,o=0===n?0:n<=a[1]?1:n<=a[2]?2:n<=a[3]?3:4;return{date:i.toISOString(),totalMessages:n,colorLevel:o}})},[r,n]),c=(0,J.useMemo)(()=>o||i,[o,i]);return(0,t.jsx)(t$,{title:e("team-insights.team-usage","Team usage"),selectedTimeRange:tZ.PAST_30_DAYS,isError:l,children:(0,t.jsx)("div",{className:"grid grid-cols-12 content-between w-full h-full max-w-[260px] place-items-stretch",children:d.map((s,i)=>(0,t.jsxs)(t4.Tooltip,{disableHoverableContent:!0,delayDuration:0,children:[(0,t.jsx)(t4.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:(0,eu.cn)("group w-full h-full flex items-center justify-center"),children:(0,t.jsx)("div",{className:(0,eu.cn)("duration-200 transition-all",{"group-hover:scale-125":!c}),children:(0,t.jsx)("div",{className:(0,eu.cn)("w-3 h-3 border border-border-l1 rounded-[4px] transition-all duration-500",{"animate-pulse":c}),style:{backgroundColor:t7[a||"dark"][c?0:s.colorLevel],animationDelay:"".concat(.03*i,"s"),animationDuration:"1s"}})})})}),!c&&(0,t.jsx)(t4.TooltipContent,{children:(0,t.jsx)("span",{className:"text-xs",children:s.totalMessages?e("team-insights.day-with-activity","{{count}} messages on {{date}}",{date:(0,t8.format)(s.date,"MMMM do"),count:s.totalMessages}):e("team-insights.day-without-activity","No activity on {{date}}",{date:(0,t8.format)(s.date,"MMMM do")})})})]},s.date))})})},t7={dark:{0:"#1D1E20",1:"#242628",2:"#3E3F41",3:"#57595B",4:"#B5B5B5"},light:{0:"#F3F3F1",1:"#BFBEBD",2:"#9F9E9D",3:"#646362",4:"#4B4A48"}},ae=e=>{let{className:a}=e;return(0,t.jsx)(tS,{transition:{duration:.2,ease:"easeInOut"},children:(0,t.jsx)("div",{className:(0,eu.cn)("@container/team-insights w-full",a),children:(0,t.jsxs)("div",{className:"grid grid-cols-1 @[500px]/team-insights:grid-cols-2 @[700px]/team-insights:grid-cols-3 w-full",children:[(0,t.jsx)("div",{className:"hidden @[500px]/team-insights:block pl-4 pr-6",children:(0,t.jsx)(t9,{})}),(0,t.jsxs)("div",{className:"hidden @[700px]/team-insights:block px-6 relative",children:[(0,t.jsx)(t2,{}),(0,t.jsx)("div",{className:"hidden @[500px]/team-insights:block absolute left-0 inset-y-1 border-l border-border-l1"})]}),(0,t.jsxs)("div",{className:"pr-4 pl-6 relative",children:[(0,t.jsx)(t3,{}),(0,t.jsx)("div",{className:"hidden @[500px]/team-insights:block absolute left-0 inset-y-1 border-l border-border-l1"})]})]})})})},at={7:"grok-4-mini-thinking-tahoe"};var aa=e.i(369699);e.i(49854);var as=e.i(304902),ai=e.i(298438),ar=e.i(498647);e.i(70015);var an=e.i(338363),ao=e.i(971463),al=e.i(665739);let ad=e=>{let{value:a,formatter:s,prefix:i,suffix:r,className:n}=e,o=a>0?"+":a<0?"-":"",l=Math.abs(a),d=s?s(l):l;return(0,t.jsxs)("span",{className:(0,eu.cn)(a>0?"text-teal-300":a<0?"text-red-300":"text-muted-foreground",n),children:[i,!!o&&o,d,r]})};var ac=e.i(809846);function au(e){var a,s,i,r,n,o,l,d,c,u,m,p,g,h,x,v,f,y,b,j,k,w,S;let{suggestion:I}=e,{ENABLE_COMPACT_QUERY_BAR:C}=(0,$.useFeatureFlags)(),M=(0,eN.useMobileSize)(640),N={type:"finance",label:null!=(x=(l=I.summary).ticker)?x:"",payload:{type:"stockMiniSummary",summary:{ticker:null!=(v=l.ticker)?v:"",name:null!=(f=null==(d=l.stockOverview)?void 0:d.name)?f:"",value:null!=(y=null==(c=l.financeValue)?void 0:c.value)?y:0,change:null!=(b=null==(u=l.financeValue)?void 0:u.change)?b:0,changePercent:null!=(j=null==(m=l.financeValue)?void 0:m.changePercent)?j:0,unit:null!=(k=null==(p=l.financeValue)?void 0:p.unit)?k:"",market:null!=(w=null==(g=l.stockOverview)?void 0:g.market)?w:"",tickerType:null!=(S=null==(h=l.stockOverview)?void 0:h.tickerType)?S:""}}}.payload,{i18n:T}=(0,eo.useTranslation)("finance"),E=null!=(s=N.summary.value)?s:0,P=null!=(i=N.summary.change)?i:0,_=null!=(r=N.summary.changePercent)?r:0,D=(null==(a=I.summary.stockOverview)?void 0:a.currency)||"USD",A=(null!=(o=null!=(n=N.summary.name)?n:N.summary.ticker)?o:"").replace(" Common Stock",""),z=ao.STOCK_ICON_MAP[N.summary.ticker];return(0,t.jsxs)("div",{className:(0,eu.cn)("flex gap-3 px-1 @sm:ps-5 @sm:pe-3 h-10 items-center",C&&!M&&"@sm:ps-3"),children:[z?(0,t.jsx)("img",{src:z,alt:N.summary.ticker,className:"w-[18px] h-[18px] rounded-sm"}):(0,t.jsx)("div",{className:"flex items-center justify-center w-[18px] h-[18px]",children:(0,t.jsx)(al.TrendingUp,{className:"text-fg-secondary",size:18})}),(0,t.jsxs)("div",{className:"flex-1 gap-1 flex items-center overflow-hidden whitespace-nowrap",children:[(0,t.jsx)("span",{className:"text-fg-primary",children:N.summary.ticker}),(0,t.jsx)("span",{children:""}),(0,t.jsx)("span",{className:"truncate flex-1",children:A}),(0,t.jsx)("span",{className:"font-semibold",children:(0,ac.formatPrice)(E,D,T.language)})," ",(0,t.jsx)(ad,{value:P,formatter:e=>e.toFixed(E<1?3:2)})," ",(0,t.jsx)(ad,{value:_,formatter:e=>"".concat(e.toFixed(2),"%"),prefix:"(",suffix:")"})]})]})}let am=e=>{let{suggestion:a,search:s,className:i}=e,r=a.text.split(" ").map(e=>({text:e,isHighlighted:!1})),n=s.split(" ");return r=r.map((e,t)=>{if(t>=n.length||!n[t])return e;let a=n[t].toLowerCase()===e.text.toLowerCase();return{...e,isHighlighted:a}}),(0,t.jsx)("div",{className:i,children:r.map((e,a)=>{if(a===n.length-1&&n[a]&&e.text.toLowerCase().includes(n[a])){var s;let i=((e,t)=>{var a,s;let i="",r=0;for(;r<e.length&&(null==(a=e[r])?void 0:a.toLowerCase())===(null==t||null==(s=t[r])?void 0:s.toLowerCase());)i+=e[r],r++;return i})(e.text,n[a]);return(0,t.jsxs)(J.Fragment,{children:[(0,t.jsx)("span",{className:"font-medium text-muted-foreground",children:i}),(0,t.jsxs)("span",{className:"text-primary",children:[null==(s=e.text)?void 0:s.slice(null==i?void 0:i.length),""]})]},a)}return e.isHighlighted?(0,t.jsxs)("span",{className:"font-medium text-muted-foreground",children:[e.text,""]},a):(0,t.jsxs)("span",{className:"text-primary",children:[e.text,""]},a)})})};var ap=e.i(69052),ag=e.i(279598);let ah=(0,p.default)("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);var ax=e.i(65992),av=e.i(987325),af=e.i(221891);let ay={},ab=(0,av.default)(()=>{(0,ei.logMetric)("autocomplete",{type:"suggestion_view",counters:ay}),ay={}},10),aj=e=>{let{suggestions:a,position:s,onPositionChange:i,onPositionSelect:r,highlightText:n,keyboardNavigationEnabled:o=!0,className:l,incrementSuggestionsShownCount:d}=e,{ENABLE_COMPACT_QUERY_BAR:c}=(0,$.useFeatureFlags)(),u=(0,eN.useMobileSize)(640),m=(0,J.useCallback)(e=>{r(e)},[r]);return(0,J.useEffect)(()=>{let e=null==a?void 0:a.length;if(!e||!o)return;let t=t=>{if("Enter"===t.key&&!t.shiftKey&&void 0!==s){t.preventDefault(),t.stopPropagation(),m(s);return}let a=0;"ArrowDown"===t.key&&(t.preventDefault(),void 0!==s&&(a=(s+1)%e),s===e-1&&(a=void 0)),"ArrowUp"===t.key&&(t.preventDefault(),void 0!==s&&(a=(s-1)%e),0===s&&(a=void 0),void 0===s&&(a=e-1)),("ArrowUp"===t.key||"ArrowDown"===t.key)&&i(a)};return document.addEventListener("keydown",t,{capture:!0}),()=>document.removeEventListener("keydown",t,{capture:!0})},[s,i,a,m,o]),(0,t.jsx)("ul",{className:(0,eu.cn)("flex flex-col-reverse sm:flex-col overflow-hidden bg-background",l,c&&a.length>0&&!u&&" -mt-[20px] bg-surface-l1 px-2 shadow-[0_4px_6px_-1px_rgba(0,0,0,0.1)] rounded-b-3xl pb-2 border border-inset border-t-0 ".concat("border-border-l1")),onMouseLeave:()=>{i(void 0)},children:a.map((e,a)=>(0,t.jsx)("li",{dir:"auto",className:(0,eu.cn)("cursor-pointer rounded-xl",s===a?"sm:border-input-border-focus sm:bg-button-ghost-hover":""),onMouseMove:e=>{let t=0!==e.movementX||0!==e.movementY;a!==s&&t&&i(a)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{m(a)},children:(0,t.jsx)(ak,{suggestion:e,highlightText:n,onReady:d})},JSON.stringify(e)))})};function ak(e){let{suggestion:a,highlightText:s,onReady:i}=e;return((0,J.useEffect)(()=>{null==i||i();let e=ay[a.type]||0;ay[a.type]=e+1,ab()},[i,a]),"stock"===a.type)?(0,t.jsx)(au,{suggestion:a}):"project"===a.type?(0,t.jsx)(aS,{icon:(0,t.jsx)(an.WorkspaceIconView,{icon:a.project.icon,size:18}),children:(0,t.jsx)("div",{className:"truncate",children:a.project.name})}):"conversation"===a.type?(0,t.jsx)(aS,{icon:(0,t.jsx)(ah,{size:18}),children:(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("span",{children:a.conversation.title}),(0,t.jsx)(ap.Timestamp,{conversation:a.conversation,className:"ms-1.5 text-fg-tertiary hidden @sm:block align-baseline"})]})}):"math"===a.type?(0,t.jsx)(aS,{icon:(0,t.jsx)(ag.Calculator,{size:18}),children:(0,t.jsx)("div",{className:"truncate",children:a.result})}):"answer"===a.type?(0,t.jsx)(aI,{icon:(0,t.jsx)(X.Zap,{size:18}),text:a.text,children:(0,t.jsx)("div",{className:"truncate text-fg-primary",children:a.text})}):(0,t.jsx)(aS,{icon:(0,t.jsx)(ar.default,{size:18}),children:(0,t.jsx)(am,{className:"flex-1",suggestion:a,search:s})})}function aw(e){let{children:a}=e,{ENABLE_COMPACT_QUERY_BAR:s}=(0,$.useFeatureFlags)(),i=(0,eN.useMobileSize)(640);return(0,t.jsx)("div",{className:(0,eu.cn)("typeahead-mask flex gap-3 px-1 @sm:ps-5 @sm:pe-0 h-10 items-center",s&&!i&&"@sm:ps-3"),dir:"auto",children:a})}function aS(e){let{icon:a,children:s}=e;return(0,t.jsxs)(aw,{children:[(0,t.jsx)("div",{className:(0,eu.cn)("block justify-start text-fg-secondary shrink-0 grow-0"),children:a}),(0,t.jsx)("div",{className:"flex-auto min-w-0 overflow-hidden truncate",children:s})]})}function aI(e){let{icon:a,children:s,text:i}=e,{t:r}=(0,eo.useTranslation)("chat"),n=(0,J.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(0,ei.logEventGlobal)("autocomplete_suggestion_copy",void 0,{location:"autocomplete_suggestion_row",suggestion_text:i}),(0,af.copyAndToast)(i,r("autocomplete_suggestion_copy.toast","Copied to clipboard"))},[i,r]);return(0,t.jsxs)(aw,{children:[(0,t.jsx)("div",{className:(0,eu.cn)("block justify-start text-fg-secondary shrink-0 grow-0"),children:a}),(0,t.jsxs)("div",{className:"truncate text-fg-primary relative w-full",children:[(0,t.jsxs)("div",{className:"absolute -left-0 top-0 w-full flex flex-row",dir:"auto",children:[(0,t.jsx)("div",{className:"max-w-[calc(100%-75px)] truncate overflow-hidden invisible inline-block",children:s}),(0,t.jsx)(tg.Button,{shape:"square",size:"xs",variant:"tertiary","aria-label":r("autocomplete_suggestion_copy.label","Copy to clipboard"),className:"ms-2",onClick:n,children:(0,t.jsx)(ax.CopyIcon,{})})]}),s]})]})}var aC=e.i(982899);function aM(e){let{className:a,handleSend:s,position:i,setPosition:r,incrementSuggestionsShownCount:o=()=>{}}=e,{push:l}=(0,e0.useRouting)(),d=(0,n.useChatPageStore)(ew.prop("setProjectId")),c=(0,n.useChatPageStore)(ew.prop("conversationId"))||"no_conversation_id",u=(0,n.useChatPageStore)(e=>e.queryByConversationId[c])||"",m=(0,J.useCallback)(e=>{let{idsetQueryByConversationId:t}=n.useChatPageStore.getState();t(e,c)},[c]),p=(0,ev.useLogEvent)(),[g,h]=(0,J.useState)(u),x=(0,as.useSuggestions)(g),v=function(e,t){let{ENABLE_UNSELECTED_LOG:a}=(0,$.useFeatureFlags)(),s=(0,J.useRef)(new Map),i=(0,J.useCallback)(t=>{if(a&&s.current.size){if(s.current.size>100)return void s.current.clear();if(void 0!==t){let a=e[t];a&&s.current.delete(a)}for(let[e,t]of s.current)(0,ei.logEventGlobal)("unselected_suggestion_view",void 0,{location:"ChatAutoCompleteSuggestions",suggestionType:e.type,text:(0,aC.getSuggestionLogLabel)(e),searchText:t});(0,ei.logMetric)("autocomplete",{type:"unselected_log_emit",count:s.current.size}),s.current.clear()}},[e,a]);return(0,J.useEffect)(()=>{for(let a of e)s.current.set(a,t)},[e,t]),(0,J.useEffect)(()=>()=>i(),[]),i}(x,g),f=(0,J.useRef)(""),y=e=>{f.current=e,m(e)};(0,J.useEffect)(()=>{r(void 0)},[g,r]),(0,J.useEffect)(()=>{u||r(void 0),(f.current!==u||""===u)&&h(u)},[r,u]);let b=!u.includes("\n")&&u.length<75;return(0,t.jsx)(aj,{suggestions:x,position:i,onPositionChange:e=>{if(r(e),void 0===e)y(g);else{let a=x[e];if(((null==a?void 0:a.type)==="search"||(null==a?void 0:a.type)==="llm")&&y(a.text),(null==a?void 0:a.type)==="stock"){var t;y(null!=(t=a.summary.ticker)?t:"")}(null==a?void 0:a.type)==="math"&&y(a.result.toString())}},onPositionSelect:e=>{if(void 0===e)return;let t=x[e];if(!t)return;let a=(0,aC.getSuggestionLogLabel)(t);if(p("suggestion_selected",void 0,{suggestionType:t.type,position:String(i),location:"chat-autocomplete-suggestions",searchText:g,text:a}),(0,ei.logMetric)("chat-autocomplete-suggestions",{type:"suggestion_selected",suggestionType:t.type}),"search"===t.type||"llm"===t.type?s({query:t.text,toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0}}):"answer"===t.type&&s({query:g,toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0}}),(null==t?void 0:t.type)==="stock"){var n;s({query:null!=(n=t.summary.ticker)?n:"",toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0}})}(null==t?void 0:t.type)==="project"&&d(t.project.workspaceId),(null==t?void 0:t.type)==="conversation"&&l({page:"chat",conversationId:t.conversation.conversationId,temporary:!1}),(null==t?void 0:t.type)==="math"?(y(t.result.toString()),h(t.result.toString())):(y(""),h("")),v(e),r(void 0)},highlightText:g,keyboardNavigationEnabled:b,incrementSuggestionsShownCount:o,className:(0,eu.cn)("z-10 no-touch-scrollbar","bg-background w-full",tr.QUERY_BAR_MAX_WIDTH_CLASS,a)})}var aN=e.i(798784);let aT=aN.z.enum(["deepsearch","brainstorm","analyzeData","createImage","code","search","createReport","finance"]),aE=aN.z.object({type:aN.z.literal("stockMiniSummary"),summary:aN.z.object({ticker:aN.z.string(),name:aN.z.string(),value:aN.z.number(),change:aN.z.number(),changePercent:aN.z.number(),unit:aN.z.string(),market:aN.z.string(),tickerType:aN.z.string()})}),aP=aN.z.discriminatedUnion("type",[aE]);aN.z.object({prefix:aN.z.string().optional(),prompt:aN.z.string().optional(),label:aN.z.string(),type:aT,icon:aN.z.string().optional(),payload:aP.optional(),route:aN.z.custom().optional()}),aN.z.object({label:aN.z.string(),prompt:aN.z.string().optional(),type:aT,img:aN.z.string().optional(),description:aN.z.string().optional(),prefix:aN.z.string().optional(),payload:aP.optional()});let a_=["en"],aD=[{type:"createImage",prefix:"Draw ",label:"Create Images",route:{page:"imagine"}},{type:"deepsearch",prefix:"Research ",label:"Research"},{type:"brainstorm",prefix:"How ",label:"How to"},{type:"analyzeData",prefix:"Help me ",label:"Analyze"},{type:"code",prefix:"Help me ",label:"Code"}],aA=(0,p.default)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);var az=e.i(907736),aL=e.i(655890);e.i(916390);var aR=e.i(297473),aO=e.i(258722),aU=e.i(137278);function aB(){let e=(0,ev.useLogEvent)(),a=(0,n.useChatPageStore)(e=>e.projectId),s=(0,n.useChatPageStore)(e=>e.setProjectId),i=(0,aU.useWorkspaceStore)(e=>e.ensureWorkspace),{t:r}=(0,eo.useTranslation)("base");(0,J.useEffect)(()=>{i(aO.DEEP_SEARCH_PROJECT_ID)},[i]);let o=(0,J.useCallback)(()=>{e("deepsearch_pill_clicked",void 0,{location:"deepsearch-suggestion-pill",target:"chip"}),s(a===aO.DEEP_SEARCH_PROJECT_ID?void 0:aO.DEEP_SEARCH_PROJECT_ID)},[e,a,s]);return(0,t.jsxs)(tg.Button,{variant:"secondary",size:"md",shape:"pill",onClick:o,children:[(0,t.jsx)(aR.DeepSearchIcon,{size:16,strokeWidth:2,className:"text-secondary"}),r("deep-search","DeepSearch")]})}var aF=e.i(979566),aH=e.i(7390),aq=e.i(567488);function aG(){let{exampleProjects:e}=(0,aq.useExampleProjects)(),{t:a}=(0,eo.useTranslation)("base"),[s,i]=(0,J.useState)(!1),r=(0,e0.useRouting)(),n=(0,J.useCallback)(e=>{i(e)},[]),o=(0,J.useCallback)(e=>{i(!1),r.push({page:"workspace",workspaceId:e.workspaceId})},[r]),l=(0,J.useCallback)(()=>{aU.useWorkspaceStore.getState().setCreateDialogIsOpen(!0)},[]),d=(0,J.useCallback)(()=>{r.push({page:"workspaces"})},[r]);return(0,t.jsxs)(eD.DropdownMenu,{open:s,onOpenChange:n,children:[(0,t.jsx)(eD.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(tg.Button,{variant:"secondary",size:"md",shape:"pill",children:[(0,t.jsx)(aF.FolderIcon,{size:16,strokeWidth:2,className:"text-secondary"}),a("try-projects","Try Projects"),(0,t.jsx)(tN.ChevronDownIcon,{size:12,strokeWidth:2,className:(0,eu.cn)("text-secondary transition-transform duration-200",{"rotate-180":s})})]})}),(0,t.jsxs)(eD.DropdownMenuContent,{children:[e.map(e=>(0,t.jsxs)(eD.DropdownMenuItem,{className:"flex items-center gap-2",onClick:()=>o(e),children:[(0,t.jsx)(an.WorkspaceIconView,{icon:e.icon}),(0,t.jsx)("p",{children:e.title})]},e.workspaceId)),(0,t.jsxs)(eD.DropdownMenuItem,{onClick:l,children:[(0,t.jsx)(aH.PlusIcon,{size:16,className:"me-2 text-secondary"}),a("create-project","Create Project")]}),(0,t.jsxs)(eD.DropdownMenuItem,{onClick:d,children:[(0,t.jsx)(aF.FolderIcon,{size:16,className:"me-2 text-secondary"}),a("view-all-projects","View All Projects")]})]})]})}var aK=e.i(762380);function aV(e){let{suggestion:a,onClick:s}=e,{label:i}=a,r=(0,J.useCallback)(()=>{s(a)},[s,a]);return(0,t.jsxs)(tg.Button,{size:"md",variant:"secondary",shape:"pill",onClick:r,children:[(0,t.jsx)(aY,{suggestion:a}),(0,t.jsx)("p",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:i})]})}function aW(e){let{handleSend:a,focusTextArea:s=()=>{}}=e,{push:i}=(0,e0.useRouting)(),r=(0,J.useMemo)(()=>aD,[]),{user:o}=(0,eY.useSession)(),l=(0,$.useFeatureFlags)(),d=(0,ek.useSettingsStore)(ew.prop("isIncognito")),c=!d,u=Math.min(r.length,5)-!!c-!!(o&&!d)-2,m=(0,aK.useCurrentLanguage)(),{exampleProjects:p}=(0,aq.useExampleProjects)(),g=a_.includes(m),h=l.EXAMPLE_PROJECTS_SUGGESTION_PILL&&p.length>0,x=(0,n.useChatPageStore)(ew.prop("conversationId"))||"no_conversation_id",v=(0,n.useChatPageStore)(e=>e.queryByConversationId[x])||"",f=(0,J.useCallback)(e=>{let{idsetQueryByConversationId:t}=n.useChatPageStore.getState();t(e,x)},[x]),y=(0,ev.useLogEvent)(),b=(0,J.useCallback)(e=>{if(e.route)i(e.route);else if(e.prefix){var t;let a="".concat(null==(t=e.prefix)?void 0:t.trim()).concat(v?":":"");(null==v?void 0:v.includes(a))||(f("".concat(a," ").concat(v)),null==s||s())}else e.prompt&&a({query:e.prompt,toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0},isPreset:!1});y("click_suggestion_pill",e.label,{suggestionType:e.type,suggestionPrefix:String(e.prefix),suggestionPrompt:String(e.prompt),location:"chat-autocomplete-suggestions:handleClickTile"})},[f,v,a,y,s,i]),j=(0,J.useMemo)(()=>r.filter(e=>"deepsearch"!==e.type),[r]);return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsxs)("div",{className:"flex flex-row flex-wrap w-full gap-2 @sm:gap-2 justify-center items-center",children:[(0,t.jsx)(aB,{}),g&&j.slice(0,u).map(e=>{let a=e.type+e.prefix+e.prompt;return(0,t.jsx)(aV,{suggestion:e,onClick:b},a)}),c&&!1,h?(0,t.jsx)(aG,{}):(0,t.jsx)(ti.LatestNewsPersona,{handleSend:a}),(0,t.jsx)(ti.PersonaPills,{handleSend:a})]})})}function aY(e){let{suggestion:a}=e,[s,i]=(0,J.useState)(!1),[r,n]=(0,J.useState)(!0);return a.icon&&!s?(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(aX,{suggestion:a}),(0,t.jsx)("img",{src:a.icon,alt:"".concat(a.type," icon"),className:"me-2 h-[18px] w-[18px] object-contain",onError:()=>i(!0),onLoad:()=>n(!1),style:{display:r?"none":"block"}})]}):(0,t.jsx)(aX,{suggestion:a})}let aQ={className:"text-secondary",strokeWidth:2,size:18};function aX(e){let{suggestion:a}=e;switch(a.type){case"deepsearch":return(0,t.jsx)(aL.ScanSearchIcon,{...aQ});case"brainstorm":return(0,t.jsx)(X.Zap,{...aQ});case"analyzeData":case"createReport":return(0,t.jsx)(aA,{...aQ});case"createImage":return(0,t.jsx)(eO.ImagePlusIcon,{...aQ});case"code":return(0,t.jsx)(az.Code,{...aQ});default:return(0,t.jsx)(t.Fragment,{})}}var aJ=e.i(257239);let aZ=(0,p.default)("AlarmClockCheck",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}],["path",{d:"m9 13 2 2 4-4",key:"6343dt"}]]);var a$=e.i(390864),a0=e.i(417508),a1=e.i(934290);let a2=e=>{let{onHide:a}=e,s=(0,ev.useLogEvent)(),i=(0,eN.useMobileSize)(),{t:r}=(0,eo.useTranslation)("tasks"),{taskPresets:n}=(0,aJ.useTaskPresets)(),o=(0,tc.useTasksStore)(ew.prop("setCreateDialogIsOpen")),l=(0,tc.useTasksStore)(ew.prop("setTaskToEdit")),[d,c]=(0,J.useState)(a4(n)[0]),u=(0,J.useCallback)(()=>{s("task_preset_clicked",void 0,{location:"PresetTaskPill"}),o(!0),l(d)},[d,o,l,s]),m=(0,J.useCallback)(e=>{s("task_preset_clicked",void 0,{location:"PresetTaskPill"}),o(!0),l(e),c(e)},[o,l,s]);return d?(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,t.jsxs)("div",{className:(0,eu.cn)("rounded-3xl p-3 bg-surface-l1 border text-xs flex items-center justify-between",{"min-w-[500px]":!i}),children:[(0,t.jsx)(a3,{value:d,onValueChange:m}),(0,t.jsxs)(h.Button,{variant:"filledSecondary",size:"sm",rounded:!0,onClick:u,className:"font-semibold",children:[(0,t.jsx)(aZ,{size:14}),i?r("create-custom-task-dialog.schedule-task-short","Schedule"):r("create-custom-task-dialog.schedule-task","Schedule Task")]})]}),(0,t.jsx)(h.ButtonWithTooltip,{tooltipContent:(0,t.jsx)("p",{children:r("create-custom-task-dialog.schedule-task-hide","Hide")}),tooltipContentProps:{side:"bottom"},variant:"filledSecondary",size:"iconMd",rounded:!0,"aria-label":r("create-custom-task-dialog.schedule-task-hide","Hide"),onClick:a,children:(0,t.jsx)(a1.X,{size:14})})]}):null};function a3(e){let{value:a,onValueChange:s}=e,[i,r]=(0,J.useState)(!1),{taskPresets:n}=(0,aJ.useTaskPresets)(),{t:o}=(0,eo.useTranslation)("tasks"),l=(0,eN.useMobileSize)(),d=(0,J.useCallback)(e=>{r(e)},[]);return(0,t.jsxs)(eD.DropdownMenu,{open:i,onOpenChange:d,children:[(0,t.jsx)(eD.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(h.Button,{className:"flex items-center font-semibold",variant:"text","aria-label":o("selected-day.label","Selected day"),size:"sm",children:[a.cta||a.name,(0,t.jsx)(a$.ChevronDown,{size:14,className:(0,eu.cn)("transition-transform duration-200",{"rotate-180":i})})]})}),(0,t.jsx)(eD.DropdownMenuContent,{side:"bottom",align:"start",sideOffset:20,alignOffset:-12,className:(0,eu.cn)({"w-[500px]":!l}),children:a4(n).map(e=>(0,t.jsxs)(eD.DropdownMenuItem,{onSelect:()=>{s(e)},className:"group flex items-center justify-between gap-2",children:[e.name,(0,t.jsx)(a0.ChevronRight,{size:14,className:"opacity-0 group-hover:opacity-100"})]},e.name))})]})}function a4(e){for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1)),s=e[t],i=e[a];if(void 0===s||void 0===i)throw Error("shuffleArray: Unexpected undefined value");e[t]=i,e[a]=s}return e}e.s(["useSharedWithMeLinks",()=>a7],680126),e.i(866166);var a5=e.i(924219),a8=e.i(111669),a6=e.i(534626),a9=e.i(93910);function a7(e){let{pageSize:t=60,orderBy:a="createTime"}=e,s=(0,eY.useSession)(),i=(0,a9.useShareRoute)(),r=s.user,{currentTeam:n,isSwitchingTeam:o}=(0,tt.useEnterprise)(),{ASSET_SERVER_URL:d}=(0,l.useEnvironment)(),{data:c,isLoading:u}=(0,tG.useQuery)({queryKey:["team-members",null==n?void 0:n.teamId],enabled:!!(null==n?void 0:n.teamId),queryFn:async()=>(null==n?void 0:n.teamId)?tO.authMgmtApi.authManagementListUsers({teamId:n.teamId}).then(e=>{var t;return(null==(t=e.members)?void 0:t.filter(e=>{var t;return(null==(t=e.user)?void 0:t.userId)!==(null==r?void 0:r.userId)}))||[]}).catch(e=>((0,ei.logError)("share-dialog:fetch-team-members",e),[])):[]}),m=(0,J.useMemo)(()=>{let e=new Map;return null==c||c.forEach(t=>{var a,s,i,r,n,o;e.set((null==(a=t.user)?void 0:a.userId)||"",{userId:(null==(s=t.user)?void 0:s.userId)||"",xUserId:(null==(i=t.user)?void 0:i.xUserId)||"",givenName:(null==(r=t.user)?void 0:r.givenName)||"",familyName:(null==(n=t.user)?void 0:n.familyName)||"",profileImageUrl:(0,ef.getAssetUrl)(d,null==(o=t.user)?void 0:o.profileImage)})}),e},[c,d]),p=(0,J.useRef)(null),g=(0,J.useRef)(null),[h,x]=(0,J.useState)(!1),[v,f]=(0,J.useState)(!1),y=(0,J.useCallback)(async e=>{let{pageParam:s}=e;if(!r)return{shareLinkResults:[],nextPageToken:void 0};let{shareLinks:i,nextPageToken:n}=await tO.chatApi.chatListShareLinks({sharedWithMe:!0,pageToken:"string"==typeof s?s:void 0,pageSize:t.toString(),orderBy:"createTime"===a?a5.ChatListShareLinksOrderByEnum.ListShareLinksOrderByCreateTime:"viewCount"===a?a5.ChatListShareLinksOrderByEnum.ListShareLinksOrderByViewCount:a5.ChatListShareLinksOrderByEnum.ListShareLinksOrderByInvalid});return{shareLinkResults:(null==i?void 0:i.map(e=>{var t;let{sharedLink:a,...s}=e;return{...s,conversation:(null==a?void 0:a.conversation)||null,response:(null==a||null==(t=a.responses)?void 0:t.find(t=>t.responseId===e.responseId))||null}}))||[],nextPageToken:n}},[r,t,a]),{data:b,fetchNextPage:j,hasNextPage:k,isFetchingNextPage:w,isFetching:S,isError:I,isLoading:C,refetch:M}=(0,a8.useInfiniteQuery)({queryKey:["share-links",null==r?void 0:r.userId,t,a],queryFn:y,initialPageParam:void 0,getNextPageParam:e=>e.nextPageToken,enabled:!!r&&!!(null==n?void 0:n.teamId)&&!o,staleTime:6e5,refetchOnWindowFocus:!0}),N=(0,J.useMemo)(()=>{var e;let t=(null==b||null==(e=b.pages.flatMap(e=>e.shareLinkResults))?void 0:e.filter(e=>!!e.shareLinkId))||[],s="createTime"===a?t.sort((e,t)=>new Date((null==t?void 0:t.createTime)||Date.now()).getTime()-new Date((null==e?void 0:e.createTime)||Date.now()).getTime()):t.sort((e,t)=>parseInt(t.viewCount||"0")-parseInt(e.viewCount||"0"));return a6.uniqBy(e=>null==e?void 0:e.shareLinkId,s).map(e=>({...e,user:(null==e?void 0:e.xaiUserId)?m.get(e.xaiUserId):void 0}))},[null==b?void 0:b.pages,m,a]),T=(0,J.useCallback)(e=>{let t=N.find(t=>t.shareLinkId===e);return(null==t?void 0:t.publicId)?i(t.publicId):i(e)},[N,i]),E=(0,J.useCallback)(e=>{window.location.href=T(e)},[T]);return(0,J.useEffect)(()=>{if(!(null==p?void 0:p.current)||!(null==g?void 0:g.current))return;let e=new IntersectionObserver(e=>{let[t]=e;t&&x(t.isIntersecting)},{root:g.current,rootMargin:"300px 0px 300px 0px",threshold:.1}),t=p.current;if(t)return e.observe(t),()=>{e.unobserve(t)}},[null==p?void 0:p.current,null==g?void 0:g.current]),(0,J.useLayoutEffect)(()=>{h&&k&&!w&&r&&!v&&(f(!0),j().catch(e=>(0,ei.logError)("intersection-load-more",e)))},[h,k,w,j,r,v]),(0,J.useEffect)(()=>{if(v){let e=setTimeout(()=>{f(!1)},300);return()=>clearTimeout(e)}},[v]),{results:N,refetch:M,loadMoreRef:p,containerRef:g,isLoading:C,isFetching:S,isError:I,isLoadingTeamMembers:u,getShareLinkHref:T,handleNavigateToSharedConversation:E}}let se=e=>{let{className:a}=e,{t:s}=(0,eo.useTranslation)("base"),{isSwitchingTeam:i}=(0,tt.useEnterprise)(),{results:r,isFetching:n,isError:o,isLoadingTeamMembers:l,handleNavigateToSharedConversation:d}=a7({pageSize:60,orderBy:"viewCount"}),c=(0,J.useMemo)(()=>n||i,[n,i]);return(0,t.jsx)(tS,{transition:{duration:.2,ease:"easeInOut"},children:(0,t.jsxs)("div",{className:(0,eu.cn)("@container/shared-with-me w-full",a),children:[(0,t.jsxs)("div",{className:"px-4 flex justify-between items-center gap-3",children:[(0,t.jsx)("span",{className:"text-xs text-fg-secondary",children:s("team-insights.shared-with-me","Shared with me")}),(0,t.jsx)(e0.Link,{route:{page:"history",tab:"shared-with-me"},className:"text-xs text-fg-tertiary hover:text-fg-secondary transition-all",children:s("team-insights.see-all","See all")})]}),o?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-center items-center mx-4 py-6 mt-4 border border-border-l1 rounded-2xl",children:(0,t.jsx)("span",{className:"text-fg-tertiary text-sm",children:s("team-insights.error-loading-data","Could not load data")})},"error"):(0,t.jsx)("div",{className:"px-4 mt-4 grid grid-cols-3 w-full gap-4",children:(0,t.jsx)(er.AnimatePresence,{initial:!1,children:Array.from({length:3}).map((e,a)=>{let s=r[a];return(0,t.jsx)(st,{shareLink:s,isLoading:c,isLoadingTeamMembers:l,onClick:s?()=>d(s.shareLinkId):void 0},"shared-with-me-".concat(a))})})})]})})},st=e=>{var a,s,i;let{shareLink:r,isLoading:n,isLoadingTeamMembers:o,onClick:l}=e,d=(0,J.useMemo)(()=>!n&&!r,[n,r]);return(0,t.jsxs)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:(0,eu.cn)("p-3 flex flex-col gap-2 bg-surface-l1 border border-border-l1 rounded-2xl transition-colors relative",{"cursor-pointer hover:bg-surface-l2":!!r&&!n,"bg-transparent":d}),children:[(0,t.jsx)("div",{className:"h-5 flex items-center min-w-0",children:(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:n?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(tC.Skeleton,{className:"h-2 w-20 rounded-sm"})},"loading"):r&&(0,t.jsx)(en.motion.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-primary truncate",children:(null==(a=r.conversation)?void 0:a.title)||"Untitled Conversation"},"title")})}),(0,t.jsx)("div",{className:"h-4 flex items-center min-w-0 ",children:(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:n||o?(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,t.jsx)(tC.Skeleton,{className:"h-2 w-16 rounded-sm"})},"loading-user"):r&&(0,t.jsx)(en.motion.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-fg-secondary text-xs truncate",children:"".concat((null==r||null==(s=r.user)?void 0:s.givenName)||""," ").concat((null==r||null==(i=r.user)?void 0:i.familyName)||"")},"user")})}),(0,t.jsx)(er.AnimatePresence,{initial:!1,children:d&&(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,eu.cn)("absolute inset-0 flex justify-center items-center"),children:(0,t.jsx)("div",{className:"w-10 border-b border-border-l1"})},"empty-state")})]})};var sa=e.i(745322);function ss(){let{t:e}=(0,eo.useTranslation)("chat"),{isSuperGrokUser:a,isEnterpriseUser:s,isSuperGrokProUser:i,bestSubscription:r,isPending:o}=(0,e9.useSubscriptions)(),{data:{enableVoiceMode:l}={}}=(0,sa.useFeatureControls)(),d=(0,tc.useTasksStore)(ew.prop("initialized")),c=(0,J.useRef)(""),{signInWithReturnTo:u}=(0,eX.useGrokRouter)(),m=(0,ev.useLogEvent)(),p=(0,$.useFeatureFlags)(),{handleVoiceModeEnter:g}=(0,tn.useVoiceMode)({location:"chat-new"}),h=(0,n.useChatPageStore)(e=>e.establishNewConversation),x=(0,ek.useSettingsStore)(ew.prop("isIncognito")),v=(0,n.useChatPageStore)(ew.prop("activeModelId")),f=(0,n.useChatPageStore)(ew.prop("defaultAnonModelId")),y=(0,n.useChatPageStore)(ew.prop("defaultFreeModelId")),b=(0,n.useChatPageStore)(ew.prop("defaultProModelId")),j=(0,n.useChatPageStore)(ew.prop("setDefaultAnonModelId")),k=(0,n.useChatPageStore)(ew.prop("setDefaultFreeModelId")),w=(0,n.useChatPageStore)(ew.prop("setDefaultProModelId")),S=(0,n.useChatPageStore)(ew.prop("reasoningMode")),I=(0,n.useChatPageStore)(ew.prop("setReasoningMode")),C=(0,n.useChatPageStore)(ew.prop("conversationId")),M=(0,n.useChatPageStore)(ew.prop("conversationId"))||"no_conversation_id",N=(0,n.useChatPageStore)(e=>e.queryByConversationId[M])||"",T=(0,eN.useMobileSize)(),E=(0,eN.useMobileSize)(640),P=(0,ea.useMobileUa)(),[_]=(0,ex.useLocalStorage)("visited-imagine2",!1),[D]=(0,ex.useLocalStorage)("imagine-banner-impressions2",0),[A,z]=(0,J.useState)(!1);(0,J.useEffect)(()=>{N&&z(!0)},[N]);let L=!P&&!T&&(p.SHOW_IMAGINE_BANNER||!p.isReady)&&D<=10&&!_&&0===N.length&&!A,R=p.ENABLE_COMPACT_QUERY_BAR,O=R&&E?e("Ask Grok","Ask Grok"):e("query-bar-placeholder.1","What do you want to know?"),{sessionStartTime:U,conversationDepth:B}=(0,tm.useTimeToValueAnalytics)(C),F=(0,ey.useFileStore)(ew.prop("listByConversationId")),H=(0,ey.useFileStore)(ew.prop("attachListByConversationId")),q=(0,eb.useImageEditorStore)(ew.prop("isOpen")),G=(0,J.useMemo)(()=>F.no_conversation_id||[],[F]),K=(0,J.useMemo)(()=>H.no_conversation_id||[],[H]),V=(0,tl.useForceSignInModels)(),W=(0,eN.useMobileSize)(),Y=(0,e7.useIsActiveGrokBusinessSession)(),Q=(0,as.useSuggestionStore)(e=>e.suggestions.length>0),X=(0,as.useSuggestionStore)(e=>e.clearList),ee=(0,J.useMemo)(()=>Y&&!x&&(W||!Q),[Y,Q,x,W]),et=(0,J.useMemo)(()=>!x&&(G.length>0&&!!G.every(e=>e.file.type.includes("image"))||(null==K?void 0:K.length)>0&&!!K.every(e=>e.mimeType.includes("image"))),[G,K,x]),es=(0,J.useMemo)(()=>!x&&(G.length>0&&!!G.every(e=>e.metadata&&e.file.type.includes("csv"))||(null==K?void 0:K.length)>0&&!!K.every(e=>e.mimeType.includes("csv"))),[G,K,x]),[el,ed]=(0,J.useState)(!1),ec=(0,J.useCallback)(()=>{var e;let t=null!=(e=window.localStorage.getItem("hideTaskPillCount"))?e:0;window.localStorage.setItem("hideTaskPillCount",String(Number(t)+1)),ed(!1)},[]),em=(0,eg.useMaybeRefreshAnonSession)(),ep=(0,eY.useSession)().user,eh=(0,J.useRef)(null),ef=(0,J.useCallback)(()=>{var e;null==(e=eh.current)||e.focus()},[eh]);(0,e6.useHotkeys)(e8.KBD_NEW_CHAT,ef,[]);let{handleKeyDown:ej,consumeCompositionTimeMs:eS,consumeBackspaceCount:eI,consumeAvgKeystrokeLatency:eC,consumeKeystrokeCount:eM,position:eT,setPosition:eE,consumePosition:eP,consumeTypeaheadReqCount:e_,incrementTypeaheadReqCount:eD,incrementSuggestionsShownCount:eA,consumeSuggestionsShownCount:ez}=(0,to.useAutocompleteMetrics)(),eL=(0,J.useCallback)(e=>{"Escape"===e.key&&X(),ej(e)},[ej,X]),eR=(0,J.useCallback)(e=>{let{query:t,fileAttachmentIds:a,webpageUrls:s,toolOverrides:i,isPreset:n,workspaceIds:o,persona:l,isIncognitoOverride:d,disableMemory:c,modelIdOverride:g}=e;if(!t)return Promise.resolve(!1);if(!ep&&V.includes(g||v))return m("sign_in","chat-new",{location:"chat-new"}),u(t,S),Promise.resolve(!1);let f=ek.useSettingsStore.getState(),y=eP(),b=i;-1===y||void 0===y||i||(b={webSearch:!0});let j=(0,tu.toAnalytics)({activeModelId:g||v,modelMode:g?"":void 0,query:t,fileAttachmentIds:a,webpageUrls:s,location:"chat-new",personalityId:f.userSettings.preferences.selectedSystemPromptId||"",personaId:"",sessionStartTime:U,conversationDepth:B,isMobile:T,bestSubscription:r,user:!!ep,compositionTime:eS(),backspaceCount:eI(),avgKeystrokeLatency:eC(),keystrokeCount:eM(),position:y,typeaheadRequestCount:e_(),suggestionsShownCount:ez(),workspaceCount:(null==o?void 0:o.length)||0,toolOverrides:b,suggestionsSource:p.ENABLE_LLM_SUGGESTIONS?"grok":"bing",parentResponseId:""});return m("send_query","",j),em().then(()=>((0,aa.reportSubmit)(),!!h({message:t,fileAttachmentIds:a,webpageUrls:s,toolOverrides:b,temporary:null!=d?d:x,isPreset:n,persona:l,enableRetries:!0,ff:p,workspaceIds:o,disableMemory:c,modelIdOverride:g}).catch((0,ei.createLogError)("chat-new:establishNewConversation"))))},[v,ep,p,m,x,S,V,em,h,eC,eI,eS,eM,eP,ez,e_,u,B,T,U,r]),{modelById:eO,defaultAnonModelId:eU,defaultFreeModelId:eB,defaultProModelId:eF,isPending:eH}=(0,tl.useModels)(),eq=(0,n.useChatPageStore)(e=>e.setActiveModelId),eG=(0,n.useChatPageStore)(e=>e.setModelMode);(0,J.useEffect)(()=>{if(eH||o&&ep)return;let e=new URLSearchParams(location.search),t=e.get("q"),r=e.get("reasoningMode"),n=e.get("fileid"),l=at[Number(e.get("m"))],d=location.hash===ai.INCOGNITO_HASH;if(l&&eO[l])ek.useSettingsStore.getState().fetchSetPreference("useModelModeSelector3",!1).catch((0,ei.createLogError)("chat-new:mount:fetchSetPreference:useModelModeSelector3")),eq(l);else if(b!==eF&&(s||a||i)&&eF&&eO[eF])w(eF),eq(eF);else if(y!==eB&&ep&&eB&&eO[eB])k(eB),eq(eB);else if(f!==eU&&eU&&eO[eU])j(eU),eq(eU);else if(r){let e=td.reasoningModeSchema.parse(r);e&&I(e)}t&&!c.current&&(eR({query:t,fileAttachmentIds:n?[n]:void 0,webpageUrls:[],isIncognitoOverride:d,disableMemory:!0,modelIdOverride:l}).catch(e=>{(0,ei.logError)("chat-new:mount:handleSend",e)}),c.current="auto-start")},[eH,o]);let eK=(0,J.useCallback)(t=>{let{query:a,parentQuotedText:s,fileAttachmentIds:i,webpageUrls:r,toolOverrides:n,isPreset:o,persona:l}=t;if(l){let t=(0,ti.mapPersonaToSettings)(l.personaId,e);t.modelMode&&eG(t.modelMode)}eR({query:a,parentQuotedText:s,fileAttachmentIds:i,webpageUrls:r,toolOverrides:n,persona:l,isPreset:o}).catch(e=>{(0,ei.logError)("chat-new:handleClickSuggestion",e)})},[eR,eG,e]),eV=(0,J.useCallback)(()=>{let t=[...G.map(e=>e.metadata).filter(e=>e&&!(e instanceof Error)).map(e=>e.fileMetadataId),...K.map(e=>e.assetId)];eR({query:e("create-report-prompt","Create a report"),fileAttachmentIds:t}).catch(e=>{(0,ei.logError)("chat-new:handleClickCreateReport",e)})},[eR,G,K,e]);(0,J.useEffect)(()=>{(0,aa.reportPageReady)()},[]);let eW=(()=>{if(!Q){if(et&&!x)return(0,t.jsx)("div",{className:"bg-background rounded-full",children:(0,t.jsxs)(e3.ImageEditorTrigger,{shouldGetFromStore:!0,buttonProps:{variant:"filledSecondary",size:"md",rounded:!0},location:"chat-new-input",children:[(0,t.jsx)(ts.ScanImageIcon,{className:"size-5 text-secondary"}),e("Edit Image","Edit Image")]})},"edit");if(es&&!x)return(0,t.jsx)(en.motion.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",exit:"hidden",className:"bg-background rounded-full",children:(0,t.jsx)(aV,{suggestion:{type:"createReport",label:e("create-report","Create Report")},onClick:eV})},"edit");if(L)return(0,t.jsx)(en.motion.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",transition:{duration:.1},exit:"hidden",className:(0,eu.cn)("w-full flex justify-center",{invisible:x}),children:(0,t.jsx)(ty,{})},"imagine-banner");if(d&&!W&&el)return(0,t.jsx)(en.motion.div,{variants:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},initial:"hidden",animate:"visible",exit:"hidden",className:(0,eu.cn)("w-full flex justify-center",{invisible:x}),children:(0,t.jsx)(a2,{onHide:ec})},"task-pill");if(!W&&!et&&!es&&ee)return(0,t.jsxs)(en.motion.div,{variants:{hidden:{opacity:0},visible:{opacity:1}},initial:"hidden",animate:"visible",transition:{duration:.2},className:(0,eu.cn)("w-full",tr.QUERY_BAR_MAX_WIDTH_CLASS),children:[(0,t.jsx)(ae,{className:"w-full mt-7"}),p.ENABLE_TEMPLATES?(0,t.jsx)(tF,{className:"w-full mt-10 mb-6"}):(0,t.jsx)(se,{className:"w-full mt-10 mb-6"})]},"teams-ui");if(!W&&!x&&!Y)return(0,t.jsx)(aW,{focusTextArea:ef,handleSend:eK})}})();return(0,t.jsx)("div",{className:"flex flex-col items-center w-full h-full p-2 mx-auto justify-center @sm:p-4 @sm:gap-9 isolate mt-16 @sm:mt-0 overflow-scroll",children:(0,t.jsxs)("div",{className:(0,eu.cn)("flex flex-col items-center gap-6 h-[450px] w-full @sm:pt-12 isolate transition-transform",{"-translate-y-20":Y&&!W}),children:[(0,t.jsxs)("div",{className:(0,eu.cn)("flex flex-col items-center justify-center w-full @sm:px-4 px-2 gap-6 @sm:gap-4 @xl:w-4/5 flex-initial pb-0",tr.QUERY_BAR_MAX_WIDTH_CLASS),children:[(0,t.jsx)(ta,{height:64,width:320}),W&&(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:ee?(0,t.jsx)(en.motion.div,{variants:{hidden:{opacity:0},visible:{opacity:1}},initial:"hidden",animate:"visible",transition:{duration:.2},className:(0,eu.cn)("w-full",tr.QUERY_BAR_MAX_WIDTH_CLASS),children:(0,t.jsx)(ae,{className:"w-full my-6"})},"teams-ui"):Q?null:(0,t.jsx)(aW,{focusTextArea:ef,handleSend:eK})})]}),(0,t.jsxs)("div",{className:(0,eu.cn)("absolute bottom-0 mx-auto inset-x-0",tr.QUERY_BAR_MAX_WIDTH_CLASS,"@sm:relative flex flex-col items-center w-full gap-1 @sm:gap-5 @sm:bottom-auto @sm:inset-x-auto @sm:max-w-full"),children:[(0,t.jsxs)("div",{className:(0,eu.cn)("flex flex-col-reverse items-center justify-between flex-1 w-full gap-0 @sm:gap-3 @sm:flex-col relative","p-2 @sm:p-0"),children:[(0,t.jsx)("div",{className:(0,eu.cn)("w-full",R&&(!Q||E)?"mb-3":""),children:(0,t.jsx)(e4.QueryBar,{className:"mt-2",textAreaClassName:R?"min-h-14 py-4 my-0 mb-0":"min-h-14 pt-5 my-0 mb-5",placeholder:O,onQuery:eR,onFrontPage:!q,ref:eh,isIncognito:x,enableVoiceMode:l,onKeyDown:eL,onVoiceModeEnter:g,showingSuggestions:Q&&!E&&!x,onBlur:X},"query-bar")}),(0,t.jsx)(er.AnimatePresence,{mode:"wait",initial:!1,children:eW}),(0,t.jsx)(aM,{className:(0,eu.cn)("overflow-visible",x&&"invisible",W||"-mt-2"),handleSend:eK,position:eT,setPosition:eE,incrementTypeaheadReqCount:eD,incrementSuggestionsShownCount:eA}),(0,t.jsx)(e5.UpsellSuperGrokSmall,{})]}),ep?null:(0,t.jsx)("div",{className:"text-[11px] @sm:text-xs text-secondary text-nowrap",children:(0,t.jsx)(Z.Trans,{ns:"chat",i18nKey:"clickwrapAgreement",defaults:"By messaging Grok, you agree to our <terms>Terms</terms> and <policy>Privacy Policy</policy>.",components:{terms:(0,t.jsx)("a",{className:"text-primary",href:"https://x.ai/legal/terms-of-service",target:"_blank",rel:"noopener noreferrer"}),policy:(0,t.jsx)("a",{className:"text-primary",href:"https://x.ai/legal/privacy-policy",target:"_blank",rel:"noopener noreferrer"})}})})]})]})})}var si=e.i(211350),sr=e.i(141769);function sn(e){let{conversationIsLoading:a,conversationError:s,optimisticConversationId:i,conversationId:r,conversation:o,templateId:l}=e,d=(0,eB.useRequestErrorToastFn)(),c=(0,n.useChatPageStore)(ew.prop("conversationMode")),{data:{enableVoiceMode:u}={}}=(0,sa.useFeatureControls)();return((0,J.useEffect)(()=>{(null==o?void 0:o.conversationId)&&ej.useResponseStore.getState().loadInitialResponses(o.conversationId).then(e=>{var t;let a=n.useChatPageStore.getState();if(a.conversationId===(null==(t=e[0])?void 0:t.conversationId)){let t=(0,si.getMostRecentResponse)(e);if(!t)return void a.setLastMessageId(void 0);if("streaming"===t.state||"reconnecting"===t.state){a.setLastMessageId(t.parentResponseId),a.setStreamedMessageId(t.responseId);return}if("optimistic"===t.state){a.setLastMessageId(t.parentResponseId),a.setOptimisticMessageId(t.responseId);return}a.setLastMessageId(t.responseId)}}).catch(e=>{d("chat-page:loadInitialResponses",e)})},[null==o?void 0:o.conversationId]),i)?(0,t.jsx)(sr.ChatInteraction,{conversationId:i,conversation:void 0,isOptimisticConversation:!0,conversationIsLoading:a,conversationError:s,enableVoiceMode:u,templateId:l},"voice"===c?"voice-chat-interaction":"chat-interaction"):r?(0,t.jsx)(sr.ChatInteraction,{conversationId:r,conversation:o||void 0,isOptimisticConversation:!1,conversationIsLoading:a,conversationError:s,enableVoiceMode:u},"chat-interaction"):null}e.s(["DropPrompt",()=>sc],689280);var so=e.i(755666);e.i(200942);var sl=e.i(274920),sd=e.i(804220);function sc(e){let{conversationId:a,containerRef:s,user:i,imageAttachmentsOnly:r=!1}=e,{t:o}=(0,eo.useTranslation)("chat"),l=function(e,t,a){let{t:s}=(0,eo.useTranslation)("base"),i=(0,n.useChatPageStore)(ew.prop("activeModelId")),{modelById:r}=(0,tl.useModels)(),o=null==r?void 0:r[i],{isAttachDisabled:l}=(0,tl.useModelFeatures)(o),{data:{enableImageUploads:d}={}}=(0,sa.useFeatureControls)(),{attachFiles:c}=(0,so.useFileAttachments)(),u=(0,ev.useLogEvent)(),{user:m}=(0,eY.useSession)(),p=(0,ey.useFileStore)(ew.prop("listByConversationId"))[e||"no_conversation_id"]||[];return"hover"===(0,sl.useDropZone)({onDrop:e=>{m&&(c(e),e.forEach(e=>{u("upload_file",e.name,{location:"file-drop",mimeType:e.type})}))},canDrop:e=>{var t;return!d&&e.files.some(e=>null==e?void 0:e.type.startsWith("image/"))?(eS.toast.error(s("feature-controls.enable-image-uploads.forbidden","Image uploads are disabled for your team.")),!1):!l&&!!e.files.length&&(!a||!(e.files.length>1)&&!!(null==(t=e.files[0])?void 0:t.type.startsWith("image/")))&&(!p.length||!p.find(t=>{var a;return t.file.name===(null==(a=e.files[0])?void 0:a.name)}))},ref:t},[p,m,l,c])}(a,s,r),d=(0,n.useChatPageStore)(ew.prop("activeModelId")),{modelById:c}=(0,tl.useModels)(),u=null==c?void 0:c[d],{isAttachDisabled:m,isThinkSelected:p,isDeepsearchSelected:g}=(0,tl.useModelFeatures)(u);return(0,t.jsx)(er.AnimatePresence,{children:l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(en.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-overlay z-50"},"drop-backdrop"),(0,t.jsx)(en.motion.div,{initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:20},className:"absolute inset-0 z-50 flex items-center justify-center p-6 pointer-events-none",children:i?m?(0,t.jsxs)("div",{className:"rounded-2xl w-full max-w-xl bg-background flex flex-col items-center py-12 border-[1px] border-dashed border-input-border",children:[(0,t.jsx)("div",{children:(0,t.jsx)(sd.TriangleAlert,{size:32,className:"text-red-400"})}),(0,t.jsx)("h2",{className:"mt-4 text-lg font-medium text-primary",children:o("Attachments are disabled","Attachments are disabled")}),(0,t.jsxs)("p",{className:"text-secondary",children:[o("Attachments are disabled for","Attachments are disabled for")," ",(0,t.jsx)("span",{className:"font-semibold",children:p?"Think":g?"DeepSearch":void 0})]})]}):(0,t.jsxs)("div",{className:"rounded-2xl w-full max-w-xl bg-background flex flex-col items-center py-12 border-[1px] border-dashed border-input-border",children:[(0,t.jsx)("div",{children:(0,t.jsx)(eO.ImagePlusIcon,{size:32,className:"text-secondary"})}),(0,t.jsx)("h2",{className:"mt-4 text-lg font-medium text-primary",children:o("Drop your files here","Drop your files here")}),(0,t.jsx)("p",{className:"text-secondary",children:o("Drop your files here to add them to your conversation","Drop your files here to add them to your conversation")})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center w-full max-w-xl py-12 border-4 border-red-400 border-dashed rounded-2xl bg-background",children:[(0,t.jsx)("div",{children:(0,t.jsx)(eO.ImagePlusIcon,{size:32,className:"text-secondary"})}),(0,t.jsx)("h2",{className:"mt-4 mb-2 text-lg font-medium text-red-400",children:o("Sign in to attach files!","Sign in to attach files!")}),(0,t.jsx)("p",{className:"text-secondary",children:o("You must be signed in to attach files to your conversation","You must be signed in to attach files to your conversation")})]})},"drop-modal")]})})}let su=(0,p.default)("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);var sm=e.i(272809);let sp=e=>{let{onDismiss:a}=e,{t:s}=(0,eo.useTranslation)("base"),[i,r]=(0,J.useState)("ASK"),n=(0,ek.useSettingsStore)(ew.prop("fetchSetPreference")),o=async()=>{if("granted"===Notification.permission||(r("WAIT"),"granted"===await Notification.requestPermission())){r("ALLOWED"),await n("browserNotificationsEnabled",!0);return}r("DENIED")};return((0,J.useEffect)(()=>{if("ASK"===i||"WAIT"===i)return;let e=setTimeout(a,2e3);return()=>clearTimeout(e)},[a,i]),(0,ea.isMobileUa)())?null:"DENIED"===i?(0,t.jsxs)("div",{className:"flex items-center gap-4 min-w-[360px]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:s("notifications_declined_title","Notifications declined")}),(0,t.jsx)("div",{className:"text-xs text-secondary",children:s("notifications_change_anytime","You can change this anytime in settings.")})]}),(0,t.jsx)(a1.X,{className:"size-5"})]}):"ALLOWED"===i?(0,t.jsxs)("div",{className:"flex items-center gap-4 min-w-[348px]",children:[(0,t.jsx)(sm.Check,{className:"size-5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:s("notifications_enabled_title","Notifications enabled")}),(0,t.jsx)("div",{className:"text-xs text-secondary",children:s("notifications_enabled_subtitle","We'll keep you updated")})]})]}):(0,t.jsxs)("div",{className:"flex justify-between items-center gap-4 relative group min-w-[360px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(su,{className:"size-5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:s("notifications_ask_title","Get notified when Grok finishes answering")}),(0,t.jsx)("div",{className:"text-xs text-secondary",children:s("notifications_ask_subtitle","Enable notifications")})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 -me-2",children:[(0,t.jsx)(h.Button,{className:"rounded-xl px-2 py-2",variant:"secondary",disabled:"WAIT"===i,onClick:o,children:s("notifications_enable","Enable")}),(0,t.jsx)(h.Button,{variant:"textSecondary",size:"iconXs","aria-label":s("notifications-toast-dismiss","Dismiss"),onClick:()=>a(!0),children:(0,t.jsx)(a1.X,{className:"!size-4"})})]})]})};var sg=e.i(164877);function sh(e){let{conversationId:a,lastMessageId:s}=e,{t:i}=(0,eo.useTranslation)("chat"),r=(0,n.useChatPageStore)(ew.prop("requestShareDialogOpen")),o=(0,n.useChatPageStore)(ew.prop("setRequestShareDialogOpen")),l=(0,eN.useMobileSize)(),c=(0,ev.useLogEvent)(),u=(0,J.useCallback)(e=>{o(e)},[o]);(0,J.useEffect)(()=>{r&&c("request_share_dialog_opened",void 0,{location:"request-share-dialog"})},[c,r]);let m=(0,J.useCallback)(()=>{o(!1)},[o]),p=(0,J.useCallback)(()=>{c("request_share_dialog_share_pressed",void 0,{location:"request-share-dialog"}),eS.toast.success(i("share-request-dialog.share-success","Conversation shared!")),o(!1)},[o,c,i]),g=(0,J.useCallback)(()=>(0,t.jsxs)("div",{className:"space-y-4 py-2",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full mt-2 flex-shrink-0 bg-primary"}),(0,t.jsx)("p",{className:"text-sm",children:i("share-request-dialog.viewers-can-only-see-current-messages","Viewers will be only able to see current messages at time of sharing.")})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full mt-2 flex-shrink-0 bg-primary"}),(0,t.jsx)("p",{className:"text-sm",children:i("share-request-dialog.viewers-cannot-add-or-modify","Viewers will not be able to add or modify this conversation.")})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2 p-3 border rounded-md",children:[(0,t.jsx)(sg.AlertTriangle,{className:"h-4 w-4 text-secondary mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-secondary font-semibold",children:[i("share-request-dialog.note","Note"),":"]}),(0,t.jsx)("p",{className:"text-sm italic text-secondary",children:i("share-request-dialog.sharing-this-conversation-means-anybody-with-the-share-link-will-be-able-to-view-it","Sharing this conversation means anybody with the share link will be able to view it.")})]})]}),(0,t.jsxs)("div",{className:"w-full flex items-center gap-2 justify-end",children:[(0,t.jsx)(tg.Button,{variant:"secondary",size:"md",shape:"rectangle",onClick:m,children:i("share-request-dialog.cancel","Cancel")}),a&&s&&(0,t.jsx)(d.ShareButton,{variant:"primary",size:"md",conversationId:a,responseId:s,iconProps:{size:18,strokeWidth:2},showLabel:!0,className:"rounded-xl",onClick:p})]})]}),[a,m,p,s,i]);return l?(0,t.jsx)(e_.Drawer,{open:r,onOpenChange:u,children:(0,t.jsxs)(e_.DrawerContent,{className:"focus:outline-none bg-surface-l1 pt-1 p-6 h-[80dvh] mb-2",children:[(0,t.jsx)("div",{className:"text-lg font-semibold",children:i("share-request-dialog.title","Share request")}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:i("share-request-dialog.description","Someone would like access to a shared version of this conversation.")}),g()]})}):(0,t.jsx)(eG.Dialog,{open:r,onOpenChange:u,children:(0,t.jsxs)(eG.DialogContent,{className:"sm:max-w-md rounded-3xl border border-border-l1 p-6",children:[(0,t.jsxs)(eG.DialogHeader,{children:[(0,t.jsx)(eG.DialogTitle,{className:"text-lg font-semibold",children:i("share-request-dialog.title","Share request")}),(0,t.jsx)(eG.DialogDescription,{className:"text-sm text-muted-foreground",children:i("share-request-dialog.description","Someone would like access to a shared version of this conversation.")})]}),g()]})})}function sx(){let{user:e}=(0,eY.useSession)(),r=(0,n.useChatPageStore)(ew.prop("optimisticConversationId")),o=(0,n.useChatPageStore)(ew.prop("conversationId")),l=(0,n.useChatPageStore)(ew.prop("lastMessageId")),d=(0,e1.useConversationStore)(ew.prop("fetchGetConversation")),c=(0,e2.useSearchParams)(),u=(0,e2.useRouter)(),m=(0,e2.usePathname)(),{route:p}=(0,e0.useRouting)();(0,J.useEffect)(()=>{var e;if("chat"===p.page&&p.temporary)return;let t="chat"===p.page&&null!=(e=p.conversationId)?e:void 0;n.useChatPageStore.setState({conversationId:t})},[p]);let g=(0,n.useChatPageStore)(ew.prop("setRequestShareDialogOpen"));(0,J.useEffect)(()=>{let e="SHARE_REQUESTED";if("true"===c.get(e)){g(!0);let t=new URLSearchParams(c.toString());t.delete(e),u.replace("".concat(m,"?").concat(t.toString()),{scroll:!1})}},[m,u,c,g]),(()=>{let{t:e}=(0,eo.useTranslation)("base"),[a,s]=(0,J.useState)(""),i=(0,n.useChatPageStore)(e=>e.lastMessageId),r=(0,n.useChatPageStore)(e=>e.streamedMessageId),o=(0,ej.useResponseStore)(e=>e.byId),l=o[i||""],d=o[r||""],c=(0,J.useMemo)(()=>{let e=l;for(;e&&"human"!==e.sender;)e=e.parentResponseId?o[e.parentResponseId]:void 0;return null==e?void 0:e.message},[l,o]),[u,m]=(0,ex.useLocalStorage)("notifications-toast-dismiss-count",0),[p,g]=(0,J.useState)(0),h=(0,J.useRef)(new Set),x=(0,ek.useSettingsStore)(e=>e.userSettings.preferences.browserNotificationsEnabled),v=(0,J.useCallback)(()=>{var t,a;if(null==(t=document)?void 0:t.hasFocus())return;let s=null==l||null==(a=l.uiLayout)?void 0:a.reasoningUiLayout;if("HEAVY"!==s&&"UNIFIED"!==s)return;let i="HEAVY"===s?e("notifications-heavy-answer-ready","Grok Heavy answer is ready"):e("notifications-answer-ready","Grok answer is ready"),r=window.matchMedia("(prefers-color-scheme: dark)").matches?"/images/notification-icon-dark.png":"/images/notification-icon-light.png";new Notification(i,c?{body:e("notifications-check-results-with-message",'Check results for "{{userMessage}}"',{userMessage:c}),icon:r}:{icon:r}).onclick=()=>{window.focus()}},[l,c,e]),f=(0,J.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];eS.toast.dismiss(a),s(""),e&&m(e=>e+1)},[m,a]),y=!!(null==d?void 0:d.liveThinkingStartTime)||!!(null==d?void 0:d.thinkingStartTime)||!!(null==d?void 0:d.searchingStartTime)||(null==d?void 0:d.steps)&&d.steps.length>0;return(0,J.useEffect)(()=>{if(!x&&d&&y){if((null==d?void 0:d.state)==="streaming")return void g(1e3);(null==l?void 0:l.state)==="closed"&&g(0)}},[d,l,x,y]),(0,J.useEffect)(()=>{if(0===p||x)return;let e=setTimeout(()=>g(e=>e+1e3),1e3);return()=>clearTimeout(e)},[x,p]),(0,J.useEffect)(()=>{let e=p>=3e3&&p<=4e3;!a&&!x&&e&&u<1&&1&&s((0,eS.toast)((0,t.jsx)(sp,{onDismiss:f}),{duration:1/0,className:"inset-x-0 mx-auto"}))},[u,f,p,a]),(0,J.useEffect)(()=>{(null==l?void 0:l.liveThinkingStartTime)&&(null==l?void 0:l.state)==="closed"&&(x&&i&&!h.current.has(i)&&(v(),h.current.add(i)),a&&(l.partial?f(!1):setTimeout(()=>f(!1),2e3)))},[x,f,l,v,a,i])})(),function(){let e=(0,e2.useSearchParams)(),{t}=(0,eo.useTranslation)("chat"),a=(0,e2.useRouter)(),s=(0,J.useRef)(!1),i=e.get(eQ.CONNECT_OAUTH_PROVIDER_SEARCH_PARAM),r=(0,e$.usePrettyOauthProvider)(i||"");(0,J.useEffect)(()=>{if(!s.current&&i){setTimeout(()=>eS.toast.success(t("oauth.connection.success","Successfully connected {{provider}}!",{provider:r})),0),s.current=!0;let e=new URL(window.location.href);e.searchParams.delete(eQ.CONNECT_OAUTH_PROVIDER_SEARCH_PARAM),a.replace("".concat(e.pathname).concat(e.search).concat(e.hash,"/"),{scroll:!1})}},[r,i,a,t])}(),function(e){let t=(0,e1.useConversationStore)(t=>e?t.byId[e]:void 0);(0,eJ.useDocumentTitle)(null==t?void 0:t.title)}(o),function(){let e=(0,n.useChatPageStore)(ew.prop("conversationMode")),t=(0,n.useChatPageStore)(ew.prop("voiceConnectionStatus")),a=(0,n.useChatPageStore)(ew.prop("exitVoiceMode")),s=(0,eb.useImageEditorStore)(ew.prop("isOpen")),{user:i}=(0,eY.useSession)(),r=(0,$.useFeatureFlags)(),o=(0,eB.useRequestErrorToastFn)(),{route:l,replace:d}=(0,e0.useRouting)(),{signInWithReturnTo:c}=(0,eX.useGrokRouter)(),{handleVoiceModeEnter:u}=(0,tn.useVoiceMode)({location:"voice-chat-page"});(0,J.useEffect)(()=>{if("voice"in l&&l.voice&&"voice"!==e&&(d({page:"main",voice:!1}),r.ENABLE_VOICE_MODE))if(i)u().catch(e=>(0,ei.logError)("chat-page:handleVoiceModeEnter",e));else{(0,ei.logEventGlobal)("sign_in","voice-chat-page",{location:"voice-chat-page"}),c(void 0,void 0,!0);return}},[l,d,e,u,t,i,c,r]),(0,J.useEffect)(()=>{s&&"voice"===e&&a("navigation").catch(e=>{o("chat-page:exitVoiceMode",e)})},[s,e,a,o])}(),function(){let e=(0,e7.useIsActiveGrokBusinessSession)(),t=(0,$.useFeatureFlags)(),{route:a}=(0,e0.useRouting)(),s="optimistic_template_conversation";(0,J.useEffect)(()=>{let i=n.useChatPageStore.getState();if(e&&"main"===a.page&&a.templateId&&t.ENABLE_TEMPLATES&&!i.optimisticConversationId){i.setOptimisticConversationId(void 0),i.setOptimisticMessageId(void 0),i.setConversationId(void 0),i.setSidePanelContent(void 0);let e={...(0,e1.createOptimisticConversation)({conversationId:s,temporary:!0})},t=e1.useConversationStore.getState();t.upsertAndCacheConversation(e),i.setOptimisticConversationId(e.conversationId);let a=new AbortController;t.idsertAbortControllerById(a,e.conversationId)}if("main"===a.page&&!a.templateId&&i.optimisticConversationId&&i.optimisticConversationId===s){let e=e1.useConversationStore.getState();e.removeConversation(s),e.removeAbortControllerById(i.optimisticConversationId),i.setOptimisticConversationId(void 0)}},[e,t.ENABLE_TEMPLATES,a])}();let{data:h,isLoading:x,error:v}=(0,eZ.usePromise)(o?d(o):void 0),{data:{enableFileUploads:f}={}}=(0,sa.useFeatureControls)();(0,J.useEffect)(()=>{n.useChatPageStore.getState().setChatPageLoaded(!0)},[]);let y=(0,n.useChatPageStore)(ew.prop("setQuotePopupData"));(0,J.useEffect)(()=>{let e=e=>{let t=window.getSelection();t&&0!==t.rangeCount&&0!==t.toString().trim().length||y(void 0)},t=e=>{let t=window.getSelection();t&&0!==t.rangeCount&&0!==t.toString().trim().length||y(void 0)};return document.addEventListener("click",e),document.addEventListener("selectionchange",t),()=>{document.removeEventListener("click",e),document.removeEventListener("selectionchange",t)}},[y]);let b=(0,J.useRef)(null),j=(0,J.useMemo)(()=>"main"===p.page&&p.templateId||void 0,[p]);return(0,t.jsx)(i.ErrorBoundary,{fallbackRender:()=>(0,t.jsx)(sv,{}),children:(0,t.jsxs)("main",{ref:b,className:(0,eu.cn)("h-dvh flex-grow flex-shrink relative selection:bg-highlight w-0","@container isolate","print:h-full print:prose print:max-w-none"),children:[o&&l&&(0,t.jsx)(sh,{conversationId:o,lastMessageId:l}),(0,t.jsx)(s.TriggeredError,{hidden:!0}),f&&(0,t.jsx)(sc,{conversationId:o,containerRef:b,user:e}),(0,t.jsx)(ai.ChatTopNav,{conversationIsLoading:x,conversation:h||void 0,isOptimisticConversation:!!r}),(0,t.jsx)(a.CommandMenu,{}),r&&"main"===p.page||o&&"chat"===p.page?(0,t.jsx)(sn,{optimisticConversationId:r,conversationIsLoading:x,conversationError:v,conversationId:o,conversation:h,templateId:j},"conversation-view"):(0,t.jsx)(ss,{}),(0,t.jsx)(eW,{})]},"chat-page")})}function sv(){let{t:e}=(0,eo.useTranslation)("chat");return(0,t.jsx)("div",{className:"w-full h-dvh flex justify-center items-center align-middle",children:(0,t.jsxs)("div",{className:"w-full max-w-lg text-center",children:[(0,t.jsx)(e0.Link,{route:{page:"main"},className:"mb-6 flex justify-center",children:(0,t.jsx)(r.GrokWordLogo,{height:20,width:60,className:"opacity-80 hover:opacity-100 fill-black dark:fill-white"})}),(0,t.jsx)("div",{children:e("There was an error","There was an error")}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(h.Button,{variant:"primary",size:"md",onClick:()=>{window.location.href="/"},children:e("Return to Home","Return to Home")})})]})})}}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="edf48dd2-2777-562a-8232-de5dac62492f")}catch(e){}}();
//# debugId=edf48dd2-2777-562a-8232-de5dac62492f
